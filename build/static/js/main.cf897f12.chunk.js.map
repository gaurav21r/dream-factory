{"version":3,"sources":["ThemeContext.js","AppHeader.js","SearchBar.js","ProjectView/ProjectView.js","HomeView/HomeView.js","SearchView/NotifySection.js","firebase.js","data/traverser.js","data/search.js","SearchView/SearchResults.js","SearchView/SearchView.js","ItemView/ToolbarPlugin.js","ItemView/Editor.js","ItemView/ItemView.js","ProjectsView/ProjectsView.js","index.js"],"names":["h1","h2","fontSize","overflow","minHeight","card","borderRadius","backgroundColor","boxShadow","flex","margin","ul","listStyleType","li","display","borderTop","padding","width","h3","AppHeader","label","isSyncing","firestore","onSyncButtonClick","navigate","useNavigate","style","styles","container","header","marginRight","onClick","evt","src","alt","animation","syncButton","borderBottom","color","paddingLeft","fontWeight","alignSelf","marginLeft","cursor","SearchBar","to","button","project","image","add","search","height","marginTop","marginBottom","ProjectView","projectId","useParams","React","useState","setProject","items","setItems","newListItemTextboxValue","setNewListItemTextboxValue","onItemRename","newLabel","item","console","log","setDoc","doc","id","merge","useEffect","getDoc","then","docSnap","exists","data","catch","e","onSnapshot","query","collection","where","snapshot","docs","map","d","flexDirection","name","theme","i","serialNumberIcon","type","onChange","renamedItems","slice","target","value","onKeyPress","key","onBlur","input","deleteIcon","deleteDoc","onItemDeletion","nextIcon","placeholder","autoFocus","addDoc","c","border","outline","textAlign","HomeView","projects","setProjects","arrow","alignItems","textDecoration","NotifySection","isNotifySectionVisibleValue","notifySectionMessageValue","viewButtonLinkIntermediaryValue","h4","ViewButtonLink","Button","variant","ViewButton","maxHeight","paddingTop","fontFamily","firebaseApp","initializeApp","apiKey","authDomain","storageBucket","messagingSenderId","appId","measurementId","initializeFirestore","cacheSizeBytes","CACHE_SIZE_UNLIMITED","setLogLevel","enableMultiTabIndexedDbPersistence","err","code","disableNetwork","TraverseFilter","traverse","o","innerTraversal","root","queue","push","length","shift","path","memory","has","Object","keys","itemPath","concat","reject","Set","traverser","fuse","Fuse","includeScore","includeMatches","ignoreLocation","ignoreFieldNorm","docChanges","forEach","change","docData","docID","content","JSON","parse","remove","SearchResults","fuseSearchResults","result","matchedIndices","matches","indices","sort","a","b","searchValue","searchResultLink","searchResult","emphasis","substr","whiteSpace","textOverflow","SearchView","fuseInstance","searchTextboxIntermediateValue","setSearchTextboxIntermediateValue","projectsAutocompleteIntermediaryValue","setProjectsAutocompleteIntermediaryValue","setViewButtonLinkIntermediaryValue","setNotifySectionMessageValue","setIsNotifySectionVisibleValue","searchResults","setSearchResults","searchTextboxRef","useRef","isInbox","SearchResultsSection","RadioButtonsSection","FormControlLabel","control","Radio","labelPlacement","AutocompletesSection","options","blurInputOnSelect","openMenuOnFocus","newOption","baseStyles","state","SearchTextboxSection","TextField","searchTextbox","multiline","ref","buttonsSection","addButoon","preventDefault","newID","uuidv4","current","focus","clearButton","ProjectAutocomplete","ItemAutocomplete","justifyContent","flexWrap","lineHeight","supportedBlockTypes","blockTypeToBlockName","h5","ol","paragraph","quote","Divider","className","positionEditorElement","editor","rect","opacity","top","left","window","pageYOffset","pageXOffset","offsetWidth","FloatingLinkEditor","editorRef","inputRef","mouseDownRef","linkUrl","setLinkUrl","isEditMode","setEditMode","lastSelection","setLastSelection","updateLinkEditor","useCallback","selection","$getSelection","$isRangeSelection","node","getSelectedNode","parent","getParent","$isLinkNode","getURL","editorElem","nativeSelection","getSelection","activeElement","document","rootElement","getRootElement","isCollapsed","contains","anchorNode","domRange","getRangeAt","inner","firstElementChild","getBoundingClientRect","mergeRegister","registerUpdateListener","editorState","read","registerCommand","SELECTION_CHANGE_COMMAND","getEditorState","event","onKeyDown","dispatchCommand","TOGGLE_LINK_COMMAND","href","rel","role","tabIndex","onMouseDown","Select","hidden","option","anchor","getNode","focusNode","isBackward","$isAtNodeEnd","BlockOptionsDropdownList","blockType","toolbarRef","setShowBlockOptionsDropDown","dropDownRef","toolbar","dropDown","handle","addEventListener","removeEventListener","update","$wrapLeafNodesInElements","$createParagraphNode","$createHeadingNode","INSERT_UNORDERED_LIST_COMMAND","REMOVE_LIST_COMMAND","INSERT_ORDERED_LIST_COMMAND","$createQuoteNode","$createCodeNode","ToolbarPlugin","useLexicalComposerContext","canUndo","setCanUndo","canRedo","setCanRedo","setBlockType","selectedElementKey","setSelectedElementKey","showBlockOptionsDropDown","codeLanguage","setCodeLanguage","setIsRTL","isLink","setIsLink","isBold","setIsBold","isItalic","setIsItalic","isUnderline","setIsUnderline","isStrikethrough","setIsStrikethrough","isCode","setIsCode","updateToolbar","element","getKey","getTopLevelElementOrThrow","elementKey","getElementByKey","$isListNode","parentList","$getNearestNodeOfType","ListNode","getTag","$isHeadingNode","getType","$isCodeNode","getLanguage","getDefaultCodeLanguage","hasFormat","$isParentElementRTL","_payload","newEditor","CAN_UNDO_COMMAND","payload","CAN_REDO_COMMAND","codeLanguges","useMemo","getCodeLanguages","onCodeLanguageSelect","$getNodeByKey","setLanguage","insertLink","disabled","UNDO_COMMAND","REDO_COMMAND","createPortal","body","FORMAT_TEXT_COMMAND","FORMAT_ELEMENT_COMMAND","Editor","initialEditorState","onEditorStateChange","cutomEditorState","editorConfig","ExampleTheme","onError","error","nodes","HeadingNode","ListItemNode","QuoteNode","CodeNode","CodeHighlightNode","TableNode","TableCellNode","TableRowNode","AutoLinkNode","LinkNode","LexicalComposer","initialConfig","contentEditable","Placeholder","ignoreSelectionChange","ignoreI","transformers","TRANSFORMERS","CustomContentPlugin","customEditorState","parseEditorState","setEditorState","ltr","rtl","heading","list","nested","listitem","link","text","bold","italic","overflowed","hashtag","underline","strikethrough","underlineStrikethrough","codeHighlight","atrule","attr","boolean","builtin","cdata","char","class","comment","constant","deleted","doctype","entity","function","important","inserted","keyword","namespace","number","operator","prolog","property","punctuation","regex","selector","string","symbol","tag","url","variable","ItemView","itemId","setItem","setCustomEditorState","saveEditorStateDebounced","_debounce","stringify","ProjectsView","newProjectTextboxValue","setNewProjectTextboxValue","onProjectRename","renamedProjects","projectLabel","syncFirestore","enableNetwork","setTimeout","setInterval","createTheme","palette","primary","main","shape","typography","join","spacing","getElementById","createRoot","router","createBrowserRouter","errorElement","render","ThemeProvider"],"mappings":"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","file":"static/js/main.cf897f12.chunk.js","sourcesContent":["export default {\n  h1: {\n\n  },\n  h2: {\n    fontSize: '24px',\n    overflow: 'hidden',\n    minHeight: '40px'\n  },\n  card: {\n    borderRadius: '6px',\n    backgroundColor: 'white',\n    boxShadow: '0px 1px 2px rgba(0, 0, 0, 0.25), 0px 1px 3px 1px rgba(0, 0, 0, 0.25)',\n    flex: '1 1 auto',\n    overflow: 'auto',\n    minHeight: 0,\n    margin: '8px'\n  },\n  ul: {\n    listStyleType: 'none'\n\n  },\n  li: {\n    display: 'flex',\n    borderTop: '1px solid #D9D9D9',\n    padding:'10px',\n    width:'100%'\n\n  },\n  h3: {\n\n  }\n}\n\n","//import {enableNetwork, disableNetwork, collection, onSnapshot, getDocsFromServer} from 'firebase/firestore';\nimport React from 'react';\nimport {useNavigate} from 'react-router-dom';\n\nexport default function AppHeader({label, firestore, isSyncing, onSyncButtonClick}) {\n  let navigate = useNavigate();\n  //var [isSyncing, setIsSyncing] = React.useState(false)\n  \n  return (\n    <div style={styles.container}>\n      <div\n        style={styles.header}\n      >\n        <span\n          style={{\n            marginRight: '20px'\n          }}\n          onClick={evt=> navigate(-1)}>\n          {\"<\"}\n        </span>\n        <span>\n          {label}\n        </span>\n      </div>\n      <img src=\"/images/sync-icon.svg\" alt=\"Sync Icon\"\n        style={{\n            animation: isSyncing ? 'animName 1.75s ease infinite' : '', \n            ...styles.syncButton\n        }}\n        onClick={onSyncButtonClick}\n      />\n      \n      {/* <img alt=\"Loading\" src={loaderImage} /> */}\n    </div>\n  );\n}\n\nvar styles = {\n  container: {\n    width: '100%',\n    backgroundColor: '#fff',\n    minHeight: '53px',\n    display: 'flex',\n    borderBottom: '1px solid #eee'\n  },\n  header: {\n    color: '#000',\n    paddingLeft: '30px',\n    fontSize: '24px',\n    fontWeight: 900,\n    alignSelf: 'center',\n  },\n  syncButton: {\n    alignSelf: 'center',\n    marginLeft: 'auto',\n    marginRight: '20px',\n    cursor: 'pointer',\n    width: 40\n  }\n}","import {Link} from 'react-router-dom';\nimport React from 'react';\nexport default function SearchBar({label, firestore}) {\n  return (\n    <div style={styles.container}>\n      <Link to={`/projects`}>\n        <div \n          style={{\n            ...styles.button,\n            ...styles.project\n          }}>\n          <img \n            style={{\n              ...styles.image\n            }}\n            src=\"/images/project-icon.svg\" \n          />\n        </div>\n      </Link>\n\n      <div style={{\n          ...styles.button,\n          ...styles.add\n      }}>\n        <img \n          style={{\n            ...styles.image\n          }}\n          src=\"/images/add-icon.svg\"\n        />\n      </div>\n      <Link to={`/search`}>\n        <div style={{\n            ...styles.button,\n            ...styles.search\n        }}>\n          <img   style={{\n              ...styles.image\n            }}\n            src=\"/images/search-icon.svg\"\n          />\n        </div>\n      </Link>\n\n    </div>\n  );\n}\n\nvar styles =  {\n  container : {\n    width: '100%',\n    backgroundColor: '#fff',\n    minHeight: '53px',\n    display: 'flex',\n    backgroundColor: '#D9D9D9',\n    marginTop: 'auto'\n  },\n  button: {\n    width: '48px',\n    height: '48px',\n    borderRadius: '12px',\n    marginRight: '10px',\n    display: 'flex',\n    backgroundColor: 'white',\n    marginTop: '8px',\n    marginBottom: '8px'\n  },\n  project: {\n    marginLeft: '10px'\n  },\n  add: {\n    marginLeft: 'auto'\n\n  },\n  search: {\n  },\n  image: {\n    width: '26px',\n    margin: 'auto'\n  }\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport {useParams, Link} from 'react-router-dom';\nimport {addDoc, setDoc, deleteDoc, doc, getDoc, onSnapshot, query, collection, where} from 'firebase/firestore';\n\n\nexport default function ProjectView({firestore}) {\n  const {projectId} = useParams();\n  var [project, setProject] = React.useState({\n    label:''\n  })\n  // Sate syncronised with the DB\n  var [items, setItems] = React.useState([]);\n\n  let [newListItemTextboxValue, setNewListItemTextboxValue] = React.useState('');\n\n  React.useEffect(()=> {    \n    getDoc(doc(firestore, \"projects\", projectId))\n    .then(docSnap =>{\n      if (docSnap.exists()) {\n        setProject({\n          ...docSnap.data(),\n          id: projectId\n        })\n      } else {\n        // doc.data() will be undefined in this case\n      }\n    })\n    .catch(e=> console.log('error', e))\n    \n    onSnapshot(\n      query(collection(firestore, 'lists'), where('projectId', '==', projectId)),\n      (snapshot) => {\n        setItems(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  function onNewItemAddition (item){\n    \n    addDoc(collection(firestore, \"lists\"), {\n      ...item,\n      projectId: project.id\n    })\n    .then(c => console.log('success', c))\n    .catch(c => console.log('error', c))\n  }\n\n  function onItemDeletion (evt, item) {\n    deleteDoc(doc(firestore, \"lists\", item.id));\n  }\n  function onItemRename (newLabel, item) {\n    console.log('onItemRename', newLabel, item)\n    setDoc(doc(firestore, \"lists\", item.id), {\n      label: newLabel,\n    }, {\n      merge: true\n    });\n  }\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }}>\n      <AppHeader label={project.label} firestore={firestore} />\n      <section name=\"itemsListSection\" style={theme.card} >\n        <ul name = \"itemsList\" style={theme.ul}> {\n          items.map((item, i)=> {\n            return(\n              <li \n                key={item.id}\n                style={{\n                  ...theme.li,\n                  backgroundColor: 'white'\n                }}\n              >\n                <span style= {styles.serialNumberIcon}>\n                  {i + 1}\n                </span>\n                <input \n                  name=\"itemLabelTextbox\"\n                  type=\"text\"\n                  onChange={evt => {\n                    var renamedItems = items.slice();\n                    renamedItems[i].label = evt.target.value;\n                    setItems(renamedItems);\n                  }}\n                  onKeyPress = {evt => {                     \n                    if (evt.key == 'Enter'){\n                      onItemRename(evt.target.value, item)\n                    }}\n                  }\n                  // Doesn't work as of now\n                  onBlur = {evt => {\n                    if (evt.target.value != item.label){\n                      onItemRename(evt.target.value, item)\n                    }\n                  }}\n                  value={item.label}\n                  style={styles.input} \n                />\n                <span \n                  style= {styles.deleteIcon}\n                  onClick={evt => onItemDeletion(evt, item)}\n                >\n                  -\n                </span>\n                <Link \n                  style= {styles.nextIcon}\n                  to={`/item/${item.id}`}\n                >\n                  >\n                </Link>\n              </li>\n            )\n          })\n        }\n        </ul>\n      </section>\n\n      <section name=\"newItem\" style= {theme.card}>  \n        <input\n          name=\"newListItemTextBox\"\n          type=\"text\" \n          placeholder=\"Add an Item\"\n          autoFocus\n          value={newListItemTextboxValue}\n          onKeyPress={evt => {\n            if (evt.key === 'Enter'){\n              onNewItemAddition({\n                label: evt.target.value\n              });\n              setNewListItemTextboxValue('')\n            }\n          }}\n          onChange= {evt => {\n            setNewListItemTextboxValue(evt.target.value)\n          }}\n          style={styles.input} />\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  input: {\n    border: 'none',\n    marginLeft: '5px',\n    outline: 'none',\n    fontSize: '16pt'\n  },\n  deleteIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: '#ee4422',\n    width: '20px',\n    textAlign: 'center'\n  },\n  nextIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: 'lightblue',\n    width: '20px',\n    textAlign: 'center'\n  },\n  serialNumberIcon: {\n    width: '20px',\n    height: '20px',\n    alignSelf: 'center'\n  }\n}\n","import \"../styles.css\";\nimport theme from '../ThemeContext';\nimport AppHeader from \"../AppHeader\";\nimport {query, collection, onSnapshot} from 'firebase/firestore';\nimport SearchBar from '../SearchBar';\nimport { Link } from \"react-router-dom\";\nimport React from \"react\";\n\n\nexport default function HomeView({firestore}) {\n  var [projects, setProjects] = React.useState([]);\n  var [items, setItems] = React.useState([]);\n  React.useEffect(()=> {\n    onSnapshot(\n      query(collection(firestore, 'projects')),\n      (snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n    onSnapshot(\n      query(collection(firestore, 'lists')),\n      (snapshot) => {\n        setItems(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  \n  return (\n    <div style={styles.container}>\n      <AppHeader label=\"Super Notes\" firestore={firestore} />\n\n      <section style={theme.card}> \n        <h2 style={styles.h2}> \n          Recent Projects \n        </h2>\n        <ul>\n          {\n            projects.map(project => {\n              return(\n              <li style={theme.li} key={project.id}>\n                <span> {project.label} </span>\n                <Link style={styles.arrow} to={`/project/${project.id}`}> {\">\"} </Link>\n              </li>)\n            })\n          }\n        </ul>\n      </section>\n      \n      <section style={theme.card}> \n        <h2 style={theme.h2}> \n          Recent Items \n        </h2>\n        <ul>\n          {\n            items.map(item => {\n              return(\n              <li style={theme.li} key={item.id}>\n                <span> {item.label} </span>\n                <Link style={styles.arrow} to={`/item/${item.id}`}> {\">\"} </Link>\n              </li>)\n            })\n          }\n        </ul>\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    alignItems: 'stretch'\n  },\n  arrow: {\n    marginLeft: 'auto',\n    fontSize: '18px',\n    fontWeight: 900,\n    textDecoration: 'none',\n    color: 'black'\n  }\n}\n\n","\nimport theme from '../ThemeContext'\nimport {Link} from 'react-router-dom';\nimport {Button} from \"@mui/material\";\n\nexport default function NotifySection ({isNotifySectionVisibleValue, notifySectionMessageValue, viewButtonLinkIntermediaryValue }){\n  return (\n    <section name=\"NotifySection\"\n      style={{\n        ...styles.NotifySection,\n        display: isNotifySectionVisibleValue ? 'flex' : 'none'\n      }}\n    >\n      <h4 style={styles.h4}> {notifySectionMessageValue} </h4>\n      <Link style={styles.ViewButtonLink} name=\"ViewButtonLink\" to={viewButtonLinkIntermediaryValue}>\n        <Button name=\"ViewButton\"\n          variant=\"contained\"\n          style={styles.ViewButton}\n        > \n          VIEW ITEM \n        </Button>\n      </Link>\n    </section>\n  )\n}\n\nvar styles = {\n  NotifySection: {\n    ...theme.card,\n    height: '40px',\n    maxHeight: '40px',\n    padding: '0px',\n    paddingTop: '0px',\n    display: 'flex',\n    flexDirection: 'row',\n    borderRadius: '6px'\n  },\n  h4: {\n    marginLeft: '8px',\n    fontSize: '12px',\n    fontFamily: 'Proxima Nova Condensed',\n    marginTop: 'auto',\n    marginBottom: 'auto',\n    alignSelf: 'middle',\n    fontWeight: 900\n  },\n}","import {initializeApp} from 'firebase/app';\nimport {\n  initializeFirestore, \n  CACHE_SIZE_UNLIMITED,\n  query, \n  getDocs, \n  setDoc, \n  collection,\n  disableNetwork,\n  enableIndexedDbPersistence,\n  enableMultiTabIndexedDbPersistence,\n  setLogLevel\n} from 'firebase/firestore';\n\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyAZKiwwf6TbJJQdy--4LG2flJCpSAx7dZk\",\n  authDomain: \"dream-factory-3bb67.firebaseapp.com\",\n  projectId: \"dream-factory-3bb67\",\n  storageBucket: \"dream-factory-3bb67.appspot.com\",\n  messagingSenderId: \"242960121837\",\n  appId: \"1:242960121837:web:f56c55f2b5019f96e8b1e4\",\n  measurementId: \"G-BB7HEFVQZ8\"\n})\nconst firestore = initializeFirestore(firebaseApp, {\n  cacheSizeBytes: CACHE_SIZE_UNLIMITED,\n  setLogLevel: 'debug'\n})\nenableMultiTabIndexedDbPersistence(firestore)\n//enableIndexedDbPersistence(firestore)\n.catch((err) => {\n  if (err.code == 'failed-precondition') {\n      // Multiple tabs open, persistence can only be enabled\n      // in one tab at a a time.\n      // ...\n  } else if (err.code == 'unimplemented') {\n      // The current browser does not support all of the\n      // features required to enable persistence\n      // ...\n  }\n});\n\ndisableNetwork(firestore)\nexport {\n  firebaseApp,\n  firestore\n}","var TraverseFilter;\n(function (TraverseFilter) {\n    /** prevents the children from being iterated. */\n    TraverseFilter[\"reject\"] = \"reject\";\n})(TraverseFilter || (TraverseFilter = {}));\nfunction* traverse(o) {\n    const memory = new Set();\n    function* innerTraversal(root) {\n        const queue = [];\n        queue.push([root, []]);\n        while (queue.length > 0) {\n            const [o, path] = queue.shift();\n            if (memory.has(o)) {\n                // we've seen this object before don't iterate it\n                continue;\n            }\n            // add the new object to our memory.\n            memory.add(o);\n            for (var i of Object.keys(o)) {\n                const item = o[i];\n                const itemPath = path.concat([i]);\n                const filter = yield [i, item, itemPath, o];\n                if (filter === TraverseFilter.reject)\n                    continue;\n                if (item !== null && typeof item === \"object\") {\n                    //going one step down in the object tree!!\n                    queue.push([item, itemPath]);\n                }\n            }\n        }\n    }\n    yield* innerTraversal(o);\n}\n\nexport default {traverse: traverse};","import Fuse from 'fuse.js'\nimport {firestore} from '../firebase';\nimport traverse from './traverser'\nimport {onSnapshot, query, collection} from 'firebase/firestore';\nvar traverser = traverse.traverse;\n\n\nvar items = [];\n\n// Intialise Fuse on each load\nconst fuse = new Fuse(items, {\n  // isCaseSensitive: false,\n  includeScore: true,\n  // shouldSort: true,\n  includeMatches: true,\n  // findAllMatches: false,\n  // minMatchCharLength: 1,\n  // location: 0,\n  // threshold: 0.6,\n  // distance: 100,\n  // useExtendedSearch: false,\n  ignoreLocation: true,\n  ignoreFieldNorm: true,\n  // fieldNormWeight: 1,\n  keys: [\n    \"label\",\n    \"content\",\n    \"id\"\n  ]\n});\n\nonSnapshot(\n  query(collection(firestore, 'lists')),snapshot => {\n    snapshot.docChanges().forEach((change) => {\n      var docData = change.doc.data()\n      var docID = change.doc.id\n      \n      // Strip just the text content from the Lexical Editor State\n      if (docData.content){\n        var content = '';\n        for (const [key, value] of traverser(JSON.parse(docData.content))) {\n          if (key == 'text')\n            content = content + ' ' + value;\n        }\n      }\n\n      // Initial load and new stuff added\n      if (change.type === \"added\") {\n        fuse.add({\n          ...docData,\n          content,\n          id: docID\n        })\n      }\n\n      // Remove old entry and re-add whole entry again\n      else if (change.type === \"modified\") {\n        fuse.remove(d=> d.id == docID)\n        fuse.add({\n          ...docData,\n          content,\n          id: docID\n        })\n        \n      }\n      else if (change.type === \"removed\") {\n        fuse.remove(d=> d.id == docID)\n      }\n    })\n  }\n)\n\nexport default fuse;\n\n","import React from 'react';\nimport fuse from '../data/search';\nimport {Link} from 'react-router-dom';\nexport default function SearchResults({fuseSearchResults}) {\n  return(\n    <ul> {\n      fuseSearchResults.map(result => {\n\n        // Fuse gives big bunch of indices but it doesn't\n        // give one with the best score so approximating here\n        // https://github.com/krisk/Fuse/issues/409\n        var matchedIndices = result.matches[0].indices.sort( (a, b) => b[1] - b[0] - (a[1] - a[0]))[0]\n        var searchValue = result.matches[0].value;\n        //debugger;\n        return(\n          <Link\n            style={styles.searchResultLink}\n            to= {`/item/${result.item.id}`}\n          >\n            <li style={styles.searchResult}> \n              <h3 style={styles.h3}> {result.item.label} </h3>\n              <span style={styles.emphasis}>\n                {searchValue.substr(matchedIndices[0], matchedIndices[1]+1)}\n              </span>\n              {searchValue.substr(matchedIndices[1]+1, searchValue.length)}\n            </li>\n          </Link>\n        )\n\n      })\n    }</ul>    \n  )\n  \n}\n\nvar styles = {\n  searchResultLink: {\n    textDecoration: 'none',\n    color: 'inherit'\n  },\n  searchResult : {\n    fontFamily: 'sans-serif',\n    whiteSpace: 'nowrap',\n    fontWeight: 400,\n    fontSize: 13,\n    margin: 5,\n//    lineHeight: 14,\n    height: 'auto',\n    padding: 5,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    display: 'block'\n  },\n  emphasis: {\n    backgroundColor: 'yellow',\n    color: 'red',\n\n  }\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport {Autocomplete, TextField, Button, Radio, FormControlLabel} from \"@mui/material\";\nimport SearchBar from '../SearchBar';\nimport NotifySection from './NotifySection';\nimport SearchResults from './SearchResults';\nimport CreatableSelect from 'react-select/creatable';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {onSnapshot, query, collection, addDoc, setDoc, doc} from 'firebase/firestore';\n\n\nexport default function SearchView({firestore, fuseInstance}) {\n  var [projects, setProjects] = React.useState([]);\n  var [searchTextboxIntermediateValue, setSearchTextboxIntermediateValue] = React.useState('');\n  var [projectsAutocompleteIntermediaryValue, setProjectsAutocompleteIntermediaryValue] = React.useState('');\n  var [viewButtonLinkIntermediaryValue, setViewButtonLinkIntermediaryValue] = React.useState('');\n  var [notifySectionMessageValue, setNotifySectionMessageValue] = React.useState(\n    'ADDED AS ITEM TO'\n  );\n  var [isNotifySectionVisibleValue, setIsNotifySectionVisibleValue] = React.useState(false);\n  var [searchResults, setSearchResults] = React.useState([]);\n  var  searchTextboxRef = React.useRef(null);\n  React.useEffect(()=> {    \n    onSnapshot(\n      query(collection(firestore, 'projects')),(snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          if (d.data().isInbox){\n            setProjectsAutocompleteIntermediaryValue({\n              ...d.data(),\n              id: d.data \n            })\n          }\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n        \n      }\n    )\n  }, [firestore]);\n\n  function onSearchTextBoxChange(evt){\n    setSearchTextboxIntermediateValue(evt.target.value)\n    setSearchResults(fuseInstance.search(evt.target.value))\n  }\n\n  return (\n    <div style={styles.container}>\n      <AppHeader label=\"Search / Add\" firestore={firestore} />\n      <section name=\"SearchResultsSection\" style={styles.SearchResultsSection}>\n        <SearchResults fuseSearchResults={searchResults} />\n      </section>\n      <section name=\"SearchBoxSection\"\n        style={{\n          ...theme.card\n        }}\n      >\n        <section name=\"RadioButtonsSection\" style={styles.RadioButtonsSection}>\n          <FormControlLabel\n            value=\"top\"\n            control={<Radio />}\n            label=\"Add as Item to Project\"\n            labelPlacement=\"end\"\n            name=\"addOptionRadio\"\n          />\n          <FormControlLabel\n            value=\"top\"\n            control={<Radio />}\n            label=\"Add as Content to Item\"\n            labelPlacement=\"start\"\n            name=\"addOptionRadio\"\n          />\n        </section>\n        <section name=\"AutocompletesSection\" style={styles.AutocompletesSection}>\n          <CreatableSelect\n            options={projects} \n            blurInputOnSelect\n            openMenuOnFocus\n            onChange = {(newOption) => setProjectsAutocompleteIntermediaryValue(newOption)}\n            value={projectsAutocompleteIntermediaryValue}\n            styles={{\n              control: (baseStyles, state) => ({\n                ...baseStyles,\n                width: '200px',\n\n              }),\n            }}\n          />\n          {/* <Autocomplete name= \"ItemAutocomplete\"\n            sx ={styles.ItemAutocomplete}\n            //value={projectsAutocompleteIntermediaryValue}\n            //label=\"Item\"\n            disablePortal\n            freeSolo\n            options={projects}\n            //autoComplete={true}\n            // onBlur={evt=> {\n            //   console.log('onBlur', evt.target.value)\n            //   if (evt.target.value == ''){\n            //     console.log('inbox project',projects,  projects.find(p=> p.isInbox == true))\n            //     setProjectsAutocompleteIntermediaryValue(projects.find(p=> (p.isInbox == true)))\n            //   }\n            // }}\n            // onChange= {(evt, newOption)=>{\n            //   if (evt.target.value == ''){\n            //     console.log('inbox project',projects,  projects.find(p=> p.isInbox == true))\n            //     setProjectsAutocompleteIntermediaryValue(projects.find(p=> (p.isInbox == true)))\n            //   }\n            //   console.log('newOption', newOption)\n            // }}\n            renderInput={(params) => \n              <TextField {...params} />\n            }\n          /> */}\n        </section>\n        <section name=\"SearchTextboxSection\" style={styles.SearchTextboxSection}>\n          <TextField name=\"SearchTextbox\"\n            placeholder=\"Search or Add Item\"\n            autoFocus\n            style={styles.searchTextbox}\n            multiline={true}\n            type=\"text\"\n            value={searchTextboxIntermediateValue}\n            onChange={onSearchTextBoxChange}\n            ref={searchTextboxRef}            \n          />\n          <section name=\"buttonsSection\" style={styles.buttonsSection}>\n            <Button name=\"addButton\"\n              variant=\"contained\"\n              style={styles.addButoon}\n              onClick={evt=> {\n                evt.preventDefault();\n                console.log('projectsAutocompleteIntermediaryValue', projectsAutocompleteIntermediaryValue)\n                var newID = uuidv4()\n                setDoc(doc(firestore, \"lists\", newID), {\n                  label: searchTextboxIntermediateValue,\n                  projectId: projectsAutocompleteIntermediaryValue['id']\n                })\n                .catch(c => console.log('error', c))\n                setViewButtonLinkIntermediaryValue(`/item/${newID}`)\n                setIsNotifySectionVisibleValue(true);\n                setNotifySectionMessageValue(`ADDED AS ITEM TO ${projectsAutocompleteIntermediaryValue.label}`);\n                setSearchTextboxIntermediateValue('')\n                searchTextboxRef.current.focus();  \n              }}\n            > \n              ADD \n            </Button>\n            <Button name=\"clearButton\"\n              variant=\"contained\"\n              style={styles.clearButton}\n              onClick= {evt =>{\n                setSearchTextboxIntermediateValue('')\n                searchTextboxRef.current.focus();\n              }} > \n              CLEAR \n            </Button>\n          </section>\n        </section>\n      </section>\n      <NotifySection \n        isNotifySectionVisibleValue={isNotifySectionVisibleValue}\n        notifySectionMessageValue={notifySectionMessageValue}\n        viewButtonLinkIntermediaryValue={viewButtonLinkIntermediaryValue}\n      />\n      <SearchBar />\n    </div>\n  )\n  \n}\nvar styles = {\n  container: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  SearchResultsSection : {\n    ...theme.card,\n    flex: 100\n  },\n\n  AutocompletesSection: {\n    display: 'flex',\n    padding: 8,\n\n  },\n  ProjectAutocomplete: {\n    flex: 1,\n    backgroundColor: 'white',\n    marginRight: 1\n  },\n  ItemAutocomplete: {\n    flex: 2,\n  },\n  RadioButtonsSection: {\n    display: 'flex',\n    padding: 8,\n    fontWeight: 'black',\n    justifyContent: 'space-between',\n    fontWeight: 900,\n    fontSize: '14px'\n  },\n  SearchTextboxSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    margin: 4,\n    padding: 4,\n    flexWrap: 'wrap',\n    width: '100%',\n  },\n  searchTextbox: {\n    flex: 1,\n    marginRight: 8\n  },\n  buttonsSection: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: 64,\n    marginRight: 16\n  },\n  clearButton: {\n    height: 40,\n    width: 64,\n    margin: 4\n  },\n  addButoon: {\n    fontWeight: 900,\n    height: 40,\n    width: 64,\n    margin: 4\n  },\n  ViewButton: {\n    height: '100%',\n    boxShadow: 'none',\n    backgroundColor: 'transparent',\n    fontWeight: 900,\n    width: 64,\n    lineHeight: '14px'\n  },\n  ViewButtonLink: {\n    textDecoration: 'none',\n    marginLeft: 'auto',\n    marginRight: '8px',\n  }\n\n}","import { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  CAN_REDO_COMMAND,\n  CAN_UNDO_COMMAND,\n  REDO_COMMAND,\n  UNDO_COMMAND,\n  SELECTION_CHANGE_COMMAND,\n  FORMAT_TEXT_COMMAND,\n  FORMAT_ELEMENT_COMMAND,\n  $getSelection,\n  $isRangeSelection,\n  $createParagraphNode,\n  $getNodeByKey\n} from \"lexical\";\nimport { $isLinkNode, TOGGLE_LINK_COMMAND } from \"@lexical/link\";\nimport {\n  $isParentElementRTL,\n  $wrapLeafNodesInElements,\n  $isAtNodeEnd\n} from \"@lexical/selection\";\nimport { $getNearestNodeOfType, mergeRegister } from \"@lexical/utils\";\nimport {\n  INSERT_ORDERED_LIST_COMMAND,\n  INSERT_UNORDERED_LIST_COMMAND,\n  REMOVE_LIST_COMMAND,\n  $isListNode,\n  ListNode\n} from \"@lexical/list\";\nimport { createPortal } from \"react-dom\";\nimport {\n  $createHeadingNode,\n  $createQuoteNode,\n  $isHeadingNode\n} from \"@lexical/rich-text\";\nimport {\n  $createCodeNode,\n  $isCodeNode,\n  getDefaultCodeLanguage,\n  getCodeLanguages\n} from \"@lexical/code\";\n\nconst LowPriority = 1;\n\nconst supportedBlockTypes = new Set([\n  \"paragraph\",\n  \"quote\",\n  \"code\",\n  \"h1\",\n  \"h2\",\n  \"ul\",\n  \"ol\"\n]);\n\nconst blockTypeToBlockName = {\n  code: \"Code Block\",\n  h1: \"Large Heading\",\n  h2: \"Small Heading\",\n  h3: \"Heading\",\n  h4: \"Heading\",\n  h5: \"Heading\",\n  ol: \"Numbered List\",\n  paragraph: \"Normal\",\n  quote: \"Quote\",\n  ul: \"Bulleted List\"\n};\n\nfunction Divider() {\n  return <div className=\"divider\" />;\n}\n\nfunction positionEditorElement(editor, rect) {\n  if (rect === null) {\n    editor.style.opacity = \"0\";\n    editor.style.top = \"-1000px\";\n    editor.style.left = \"-1000px\";\n  } else {\n    editor.style.opacity = \"1\";\n    editor.style.top = `${rect.top + rect.height + window.pageYOffset + 10}px`;\n    editor.style.left = `${\n      rect.left + window.pageXOffset - editor.offsetWidth / 2 + rect.width / 2\n    }px`;\n  }\n}\n\nfunction FloatingLinkEditor({ editor }) {\n  const editorRef = useRef(null);\n  const inputRef = useRef(null);\n  const mouseDownRef = useRef(false);\n  const [linkUrl, setLinkUrl] = useState(\"\");\n  const [isEditMode, setEditMode] = useState(false);\n  const [lastSelection, setLastSelection] = useState(null);\n\n  const updateLinkEditor = useCallback(() => {\n    const selection = $getSelection();\n    if ($isRangeSelection(selection)) {\n      const node = getSelectedNode(selection);\n      const parent = node.getParent();\n      if ($isLinkNode(parent)) {\n        setLinkUrl(parent.getURL());\n      } else if ($isLinkNode(node)) {\n        setLinkUrl(node.getURL());\n      } else {\n        setLinkUrl(\"\");\n      }\n    }\n    const editorElem = editorRef.current;\n    const nativeSelection = window.getSelection();\n    const activeElement = document.activeElement;\n\n    if (editorElem === null) {\n      return;\n    }\n\n    const rootElement = editor.getRootElement();\n    if (\n      selection !== null &&\n      !nativeSelection.isCollapsed &&\n      rootElement !== null &&\n      rootElement.contains(nativeSelection.anchorNode)\n    ) {\n      const domRange = nativeSelection.getRangeAt(0);\n      let rect;\n      if (nativeSelection.anchorNode === rootElement) {\n        let inner = rootElement;\n        while (inner.firstElementChild != null) {\n          inner = inner.firstElementChild;\n        }\n        rect = inner.getBoundingClientRect();\n      } else {\n        rect = domRange.getBoundingClientRect();\n      }\n\n      if (!mouseDownRef.current) {\n        positionEditorElement(editorElem, rect);\n      }\n      setLastSelection(selection);\n    } else if (!activeElement || activeElement.className !== \"link-input\") {\n      positionEditorElement(editorElem, null);\n      setLastSelection(null);\n      setEditMode(false);\n      setLinkUrl(\"\");\n    }\n\n    return true;\n  }, [editor]);\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          updateLinkEditor();\n        });\n      }),\n\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        () => {\n          updateLinkEditor();\n          return true;\n        },\n        LowPriority\n      )\n    );\n  }, [editor, updateLinkEditor]);\n\n  useEffect(() => {\n    editor.getEditorState().read(() => {\n      updateLinkEditor();\n    });\n  }, [editor, updateLinkEditor]);\n\n  useEffect(() => {\n    if (isEditMode && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isEditMode]);\n\n  return (\n    <div ref={editorRef} className=\"link-editor\">\n      {isEditMode ? (\n        <input\n          ref={inputRef}\n          className=\"link-input\"\n          value={linkUrl}\n          onChange={(event) => {\n            setLinkUrl(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.key === \"Enter\") {\n              event.preventDefault();\n              if (lastSelection !== null) {\n                if (linkUrl !== \"\") {\n                  editor.dispatchCommand(TOGGLE_LINK_COMMAND, linkUrl);\n                }\n                setEditMode(false);\n              }\n            } else if (event.key === \"Escape\") {\n              event.preventDefault();\n              setEditMode(false);\n            }\n          }}\n        />\n      ) : (\n        <>\n          <div className=\"link-input\">\n            <a href={linkUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              {linkUrl}\n            </a>\n            <div\n              className=\"link-edit\"\n              role=\"button\"\n              tabIndex={0}\n              onMouseDown={(event) => event.preventDefault()}\n              onClick={() => {\n                setEditMode(true);\n              }}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction Select({ onChange, className, options, value }) {\n  return (\n    <select className={className} onChange={onChange} value={value}>\n      <option hidden={true} value=\"\" />\n      {options.map((option) => (\n        <option key={option} value={option}>\n          {option}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction getSelectedNode(selection) {\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  const anchorNode = selection.anchor.getNode();\n  const focusNode = selection.focus.getNode();\n  if (anchorNode === focusNode) {\n    return anchorNode;\n  }\n  const isBackward = selection.isBackward();\n  if (isBackward) {\n    return $isAtNodeEnd(focus) ? anchorNode : focusNode;\n  } else {\n    return $isAtNodeEnd(anchor) ? focusNode : anchorNode;\n  }\n}\n\nfunction BlockOptionsDropdownList({\n  editor,\n  blockType,\n  toolbarRef,\n  setShowBlockOptionsDropDown\n}) {\n  const dropDownRef = useRef(null);\n\n  useEffect(() => {\n    const toolbar = toolbarRef.current;\n    const dropDown = dropDownRef.current;\n\n    if (toolbar !== null && dropDown !== null) {\n      const { top, left } = toolbar.getBoundingClientRect();\n      dropDown.style.top = `${top + 40}px`;\n      dropDown.style.left = `${left}px`;\n    }\n  }, [dropDownRef, toolbarRef]);\n\n  useEffect(() => {\n    const dropDown = dropDownRef.current;\n    const toolbar = toolbarRef.current;\n\n    if (dropDown !== null && toolbar !== null) {\n      const handle = (event) => {\n        const target = event.target;\n\n        if (!dropDown.contains(target) && !toolbar.contains(target)) {\n          setShowBlockOptionsDropDown(false);\n        }\n      };\n      document.addEventListener(\"click\", handle);\n\n      return () => {\n        document.removeEventListener(\"click\", handle);\n      };\n    }\n  }, [dropDownRef, setShowBlockOptionsDropDown, toolbarRef]);\n\n  const formatParagraph = () => {\n    if (blockType !== \"paragraph\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createParagraphNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatLargeHeading = () => {\n    if (blockType !== \"h1\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createHeadingNode(\"h1\"));\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatSmallHeading = () => {\n    if (blockType !== \"h2\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createHeadingNode(\"h2\"));\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatBulletList = () => {\n    if (blockType !== \"ul\") {\n      editor.dispatchCommand(INSERT_UNORDERED_LIST_COMMAND);\n    } else {\n      editor.dispatchCommand(REMOVE_LIST_COMMAND);\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatNumberedList = () => {\n    if (blockType !== \"ol\") {\n      editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND);\n    } else {\n      editor.dispatchCommand(REMOVE_LIST_COMMAND);\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatQuote = () => {\n    if (blockType !== \"quote\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createQuoteNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatCode = () => {\n    if (blockType !== \"code\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createCodeNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  return (\n    <div className=\"dropdown\" ref={dropDownRef}>\n      <button className=\"item\" onClick={formatParagraph}>\n        <span className=\"icon paragraph\" />\n        <span className=\"text\">Normal</span>\n        {blockType === \"paragraph\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatLargeHeading}>\n        <span className=\"icon large-heading\" />\n        <span className=\"text\">Large Heading</span>\n        {blockType === \"h1\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatSmallHeading}>\n        <span className=\"icon small-heading\" />\n        <span className=\"text\">Small Heading</span>\n        {blockType === \"h2\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatBulletList}>\n        <span className=\"icon bullet-list\" />\n        <span className=\"text\">Bullet List</span>\n        {blockType === \"ul\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatNumberedList}>\n        <span className=\"icon numbered-list\" />\n        <span className=\"text\">Numbered List</span>\n        {blockType === \"ol\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatQuote}>\n        <span className=\"icon quote\" />\n        <span className=\"text\">Quote</span>\n        {blockType === \"quote\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatCode}>\n        <span className=\"icon code\" />\n        <span className=\"text\">Code Block</span>\n        {blockType === \"code\" && <span className=\"active\" />}\n      </button>\n    </div>\n  );\n}\n\nexport default function ToolbarPlugin() {\n  const [editor] = useLexicalComposerContext();\n  const toolbarRef = useRef(null);\n  const [canUndo, setCanUndo] = useState(false);\n  const [canRedo, setCanRedo] = useState(false);\n  const [blockType, setBlockType] = useState(\"paragraph\");\n  const [selectedElementKey, setSelectedElementKey] = useState(null);\n  const [showBlockOptionsDropDown, setShowBlockOptionsDropDown] = useState(\n    false\n  );\n  const [codeLanguage, setCodeLanguage] = useState(\"\");\n  const [isRTL, setIsRTL] = useState(false);\n  const [isLink, setIsLink] = useState(false);\n  const [isBold, setIsBold] = useState(false);\n  const [isItalic, setIsItalic] = useState(false);\n  const [isUnderline, setIsUnderline] = useState(false);\n  const [isStrikethrough, setIsStrikethrough] = useState(false);\n  const [isCode, setIsCode] = useState(false);\n\n  const updateToolbar = useCallback(() => {\n    const selection = $getSelection();\n    if ($isRangeSelection(selection)) {\n      const anchorNode = selection.anchor.getNode();\n      const element =\n        anchorNode.getKey() === \"root\"\n          ? anchorNode\n          : anchorNode.getTopLevelElementOrThrow();\n      const elementKey = element.getKey();\n      const elementDOM = editor.getElementByKey(elementKey);\n      if (elementDOM !== null) {\n        setSelectedElementKey(elementKey);\n        if ($isListNode(element)) {\n          const parentList = $getNearestNodeOfType(anchorNode, ListNode);\n          const type = parentList ? parentList.getTag() : element.getTag();\n          setBlockType(type);\n        } else {\n          const type = $isHeadingNode(element)\n            ? element.getTag()\n            : element.getType();\n          setBlockType(type);\n          if ($isCodeNode(element)) {\n            setCodeLanguage(element.getLanguage() || getDefaultCodeLanguage());\n          }\n        }\n      }\n      // Update text format\n      setIsBold(selection.hasFormat(\"bold\"));\n      setIsItalic(selection.hasFormat(\"italic\"));\n      setIsUnderline(selection.hasFormat(\"underline\"));\n      setIsStrikethrough(selection.hasFormat(\"strikethrough\"));\n      setIsCode(selection.hasFormat(\"code\"));\n      setIsRTL($isParentElementRTL(selection));\n\n      // Update links\n      const node = getSelectedNode(selection);\n      const parent = node.getParent();\n      if ($isLinkNode(parent) || $isLinkNode(node)) {\n        setIsLink(true);\n      } else {\n        setIsLink(false);\n      }\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          updateToolbar();\n        });\n      }),\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        (_payload, newEditor) => {\n          updateToolbar();\n          return false;\n        },\n        LowPriority\n      ),\n      editor.registerCommand(\n        CAN_UNDO_COMMAND,\n        (payload) => {\n          setCanUndo(payload);\n          return false;\n        },\n        LowPriority\n      ),\n      editor.registerCommand(\n        CAN_REDO_COMMAND,\n        (payload) => {\n          setCanRedo(payload);\n          return false;\n        },\n        LowPriority\n      )\n    );\n  }, [editor, updateToolbar]);\n\n  const codeLanguges = useMemo(() => getCodeLanguages(), []);\n  const onCodeLanguageSelect = useCallback(\n    (e) => {\n      editor.update(() => {\n        if (selectedElementKey !== null) {\n          const node = $getNodeByKey(selectedElementKey);\n          if ($isCodeNode(node)) {\n            node.setLanguage(e.target.value);\n          }\n        }\n      });\n    },\n    [editor, selectedElementKey]\n  );\n\n  const insertLink = useCallback(() => {\n    if (!isLink) {\n      editor.dispatchCommand(TOGGLE_LINK_COMMAND, \"https://\");\n    } else {\n      editor.dispatchCommand(TOGGLE_LINK_COMMAND, null);\n    }\n  }, [editor, isLink]);\n\n  return (\n    <div className=\"toolbar\" ref={toolbarRef}>\n      <button\n        disabled={!canUndo}\n        onClick={() => {\n          editor.dispatchCommand(UNDO_COMMAND);\n        }}\n        className=\"toolbar-item spaced\"\n        aria-label=\"Undo\"\n      >\n        <i className=\"format undo\" />\n      </button>\n      <button\n        disabled={!canRedo}\n        onClick={() => {\n          editor.dispatchCommand(REDO_COMMAND);\n        }}\n        className=\"toolbar-item\"\n        aria-label=\"Redo\"\n      >\n        <i className=\"format redo\" />\n      </button>\n      <Divider />\n      {supportedBlockTypes.has(blockType) && (\n        <>\n          <button\n            className=\"toolbar-item block-controls\"\n            onClick={() =>\n              setShowBlockOptionsDropDown(!showBlockOptionsDropDown)\n            }\n            aria-label=\"Formatting Options\"\n          >\n            <span className={\"icon block-type \" + blockType} />\n            <span className=\"text\">{blockTypeToBlockName[blockType]}</span>\n            <i className=\"chevron-down\" />\n          </button>\n          {showBlockOptionsDropDown &&\n            createPortal(\n              <BlockOptionsDropdownList\n                editor={editor}\n                blockType={blockType}\n                toolbarRef={toolbarRef}\n                setShowBlockOptionsDropDown={setShowBlockOptionsDropDown}\n              />,\n              document.body\n            )}\n          <Divider />\n        </>\n      )}\n      {blockType === \"code\" ? (\n        <>\n          <Select\n            className=\"toolbar-item code-language\"\n            onChange={onCodeLanguageSelect}\n            options={codeLanguges}\n            value={codeLanguage}\n          />\n          <i className=\"chevron-down inside\" />\n        </>\n      ) : (\n        <>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\");\n            }}\n            className={\"toolbar-item spaced \" + (isBold ? \"active\" : \"\")}\n            aria-label=\"Format Bold\"\n          >\n            <i className=\"format bold\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"italic\");\n            }}\n            className={\"toolbar-item spaced \" + (isItalic ? \"active\" : \"\")}\n            aria-label=\"Format Italics\"\n          >\n            <i className=\"format italic\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"underline\");\n            }}\n            className={\"toolbar-item spaced \" + (isUnderline ? \"active\" : \"\")}\n            aria-label=\"Format Underline\"\n          >\n            <i className=\"format underline\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"strikethrough\");\n            }}\n            className={\n              \"toolbar-item spaced \" + (isStrikethrough ? \"active\" : \"\")\n            }\n            aria-label=\"Format Strikethrough\"\n          >\n            <i className=\"format strikethrough\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"code\");\n            }}\n            className={\"toolbar-item spaced \" + (isCode ? \"active\" : \"\")}\n            aria-label=\"Insert Code\"\n          >\n            <i className=\"format code\" />\n          </button>\n          <button\n            onClick={insertLink}\n            className={\"toolbar-item spaced \" + (isLink ? \"active\" : \"\")}\n            aria-label=\"Insert Link\"\n          >\n            <i className=\"format link\" />\n          </button>\n          {isLink &&\n            createPortal(<FloatingLinkEditor editor={editor} />, document.body)}\n          <Divider />\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"left\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Left Align\"\n          >\n            <i className=\"format left-align\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"center\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Center Align\"\n          >\n            <i className=\"format center-align\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"right\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Right Align\"\n          >\n            <i className=\"format right-align\" />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"justify\");\n            }}\n            className=\"toolbar-item\"\n            aria-label=\"Justify Align\"\n          >\n            <i className=\"format justify-align\" />\n          </button>{\" \"}\n        </>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { HistoryPlugin } from \"@lexical/react/LexicalHistoryPlugin\";\nimport { AutoFocusPlugin } from \"@lexical/react/LexicalAutoFocusPlugin\";\nimport ToolbarPlugin from \"./ToolbarPlugin\";\nimport { HeadingNode, QuoteNode } from \"@lexical/rich-text\";\nimport { TableCellNode, TableNode, TableRowNode } from \"@lexical/table\";\nimport { ListItemNode, ListNode } from \"@lexical/list\";\nimport { CodeHighlightNode, CodeNode } from \"@lexical/code\";\nimport { AutoLinkNode, LinkNode } from \"@lexical/link\";\nimport { LinkPlugin } from \"@lexical/react/LexicalLinkPlugin\";\nimport { ListPlugin } from \"@lexical/react/LexicalListPlugin\";\nimport { MarkdownShortcutPlugin } from \"@lexical/react/LexicalMarkdownShortcutPlugin\";\nimport {OnChangePlugin} from '@lexical/react/LexicalOnChangePlugin';\nimport { TRANSFORMERS } from \"@lexical/markdown\";\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport \"./editor.css\";\nexport default function Editor({initialEditorState, onEditorStateChange, cutomEditorState}) {\n  const editorConfig = {\n    // The editor theme\n    theme: ExampleTheme,\n    // Handling of errors during update\n    onError(error) {\n      throw error;\n    },\n    editorState: initialEditorState,\n    // Any custom nodes go here\n    nodes: [\n      HeadingNode,\n      ListNode,\n      ListItemNode,\n      QuoteNode,\n      CodeNode,\n      CodeHighlightNode,\n      TableNode,\n      TableCellNode,\n      TableRowNode,\n      AutoLinkNode,\n      LinkNode\n    ]\n  };\n  \n  return (\n    <LexicalComposer initialConfig={editorConfig}>\n      <div className=\"editor-container\">\n        <div className=\"editor-inner\">\n          <RichTextPlugin\n            contentEditable={<ContentEditable className=\"editor-input\" />}\n            placeholder={<Placeholder />}\n          />\n          <HistoryPlugin />\n          <OnChangePlugin \n            ignoreSelectionChange={true}\n            ignoreI\n            onChange={editorState => onEditorStateChange ? onEditorStateChange(editorState) : 0} \n          />\n          <AutoFocusPlugin />\n          <ListPlugin />\n          <LinkPlugin />\n          <MarkdownShortcutPlugin transformers={TRANSFORMERS} />\n          <CustomContentPlugin customEditorState={cutomEditorState} />\n        </div>\n        <ToolbarPlugin />\n      </div>\n    </LexicalComposer>\n  );\n}\n\n// Lexical React plugins are React components, which makes them\n// highly composable. Furthermore, you can lazy load plugins if\n// desired, so you don't pay the cost for plugins until you\n// actually use them.\nfunction CustomContentPlugin({customEditorState}) {\n  const [editor] = useLexicalComposerContext();\n\n  React.useEffect(() => {\n    \n    const editorState = editor.parseEditorState(customEditorState);\n    editor.setEditorState(editorState);\n    // Focus the editor when the effect fires!\n    editor.focus();\n  }, [editor, customEditorState]);\n\n  return null;\n}\n\nconst ExampleTheme = {\n  ltr: \"ltr\",\n  rtl: \"rtl\",\n  placeholder: \"editor-placeholder\",\n  paragraph: \"editor-paragraph\",\n  quote: \"editor-quote\",\n  heading: {\n    h1: \"editor-heading-h1\",\n    h2: \"editor-heading-h2\",\n    h3: \"editor-heading-h3\",\n    h4: \"editor-heading-h4\",\n    h5: \"editor-heading-h5\"\n  },\n  list: {\n    nested: {\n      listitem: \"editor-nested-listitem\"\n    },\n    ol: \"editor-list-ol\",\n    ul: \"editor-list-ul\",\n    listitem: \"editor-listitem\"\n  },\n  image: \"editor-image\",\n  link: \"editor-link\",\n  text: {\n    bold: \"editor-text-bold\",\n    italic: \"editor-text-italic\",\n    overflowed: \"editor-text-overflowed\",\n    hashtag: \"editor-text-hashtag\",\n    underline: \"editor-text-underline\",\n    strikethrough: \"editor-text-strikethrough\",\n    underlineStrikethrough: \"editor-text-underlineStrikethrough\",\n    code: \"editor-text-code\"\n  },\n  code: \"editor-code\",\n  codeHighlight: {\n    atrule: \"editor-tokenAttr\",\n    attr: \"editor-tokenAttr\",\n    boolean: \"editor-tokenProperty\",\n    builtin: \"editor-tokenSelector\",\n    cdata: \"editor-tokenComment\",\n    char: \"editor-tokenSelector\",\n    class: \"editor-tokenFunction\",\n    \"class-name\": \"editor-tokenFunction\",\n    comment: \"editor-tokenComment\",\n    constant: \"editor-tokenProperty\",\n    deleted: \"editor-tokenProperty\",\n    doctype: \"editor-tokenComment\",\n    entity: \"editor-tokenOperator\",\n    function: \"editor-tokenFunction\",\n    important: \"editor-tokenVariable\",\n    inserted: \"editor-tokenSelector\",\n    keyword: \"editor-tokenAttr\",\n    namespace: \"editor-tokenVariable\",\n    number: \"editor-tokenProperty\",\n    operator: \"editor-tokenOperator\",\n    prolog: \"editor-tokenComment\",\n    property: \"editor-tokenProperty\",\n    punctuation: \"editor-tokenPunctuation\",\n    regex: \"editor-tokenVariable\",\n    selector: \"editor-tokenSelector\",\n    string: \"editor-tokenSelector\",\n    symbol: \"editor-tokenProperty\",\n    tag: \"editor-tokenProperty\",\n    url: \"editor-tokenOperator\",\n    variable: \"editor-tokenVariable\"\n  }\n};\n\nfunction Placeholder() {\n  return <div className=\"editor-placeholder\">Enter some rich text...</div>;\n}\n\n\n","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport Editor from './Editor';\nimport {useParams} from 'react-router-dom';\nimport _debounce from 'lodash/debounce';\n\nimport {setDoc, doc, getDoc} from 'firebase/firestore';\n\nexport default function ItemView({firestore}) {\n  const {itemId} = useParams();\n  var [item, setItem] = React.useState({})\n  //Controls the input to Lexical\n  var emptyEditorState = `{\"root\":{\"children\":[{\"children\":[],\"direction\":null,\"format\":\"\",\"indent\":0,\"type\":\"paragraph\",\"version\":1}],\"direction\":null,\"format\":\"\",\"indent\":0,\"type\":\"root\",\"version\":1}}`\n  //var headingAndNumbersState = `{\"root\":{\"children\":[{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"This is React vs View\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"heading\",\"version\":1,\"tag\":\"h1\"},{\"children\":[{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"React is more popular.\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"listitem\",\"version\":1,\"value\":1},{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"React is based on better programming principles!\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"listitem\",\"version\":1,\"value\":2}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"list\",\"version\":1,\"listType\":\"number\",\"start\":1,\"tag\":\"ol\"}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"root\",\"version\":1}}`\n  var [customEditorState, setCustomEditorState] = React.useState(\n    emptyEditorState\n  );\n  \n  // Debounce changes from editor to save to Firestore\n  var saveEditorStateDebounced = React.useCallback(_debounce( (content, item) => {\n    console.log('Save Called!')\n    setDoc(doc(firestore, \"lists\", item.id), {\n      content: content\n    }, {\n      merge: true\n    });\n  }, 2000), [])\n  //TODO React is calling this function many times and hence\n  // checking, if item.id is already there then there \n  // then ItemState is already populated from DB.\n  React.useEffect(() => {\n    \n    // Load content from firebase and set it as editor state\n    if (!item.id){\n      getDoc(doc(firestore, \"lists\", itemId))\n      .then(docSnap =>{\n        if (docSnap.exists()) {\n          setItem({\n            ...docSnap.data(),\n            id: itemId\n          });\n          if (docSnap.data().content){\n            setCustomEditorState(docSnap.data().content)\n          }\n        } else {\n          // doc.data() will be undefined in this case\n        }\n      })\n      .catch(e=> console.log('error', e))\n    }\n    \n  }, [])\n\n  return(\n\n    <div style={styles.container}>\n      <AppHeader label={item.label} firestore={firestore} />\n      <Editor\n        initialEditorState ={\n          customEditorState\n        }\n        cutomEditorState = {\n          customEditorState\n        }\n        onEditorStateChange = {\n          editorState => {\n            setItem({\n              ...item,\n              content: JSON.stringify(editorState)\n            })\n            saveEditorStateDebounced(JSON.stringify(editorState), item);\n          }\n        }\n      />\n      <SearchBar />\n    </div>\n  )\n}\n\nvar styles = {\n  container: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport {Link} from 'react-router-dom';\nimport {addDoc, setDoc, deleteDoc, doc, getDoc, onSnapshot, query, collection} from 'firebase/firestore';\n\n\nexport default function ProjectsView({firestore}) {\n  \n  // Sate syncronised with the DB\n  var [projects, setProjects] = React.useState([]);\n\n  let [newProjectTextboxValue, setNewProjectTextboxValue] = React.useState('');\n\n  React.useEffect(()=> {    \n    onSnapshot(\n      query(collection(firestore, 'projects')),\n      (snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  function onNewProjectAddition (projectLabel){\n    \n    addDoc(collection(firestore, \"projects\"), {\n      label: projectLabel\n    })\n    .then(c => console.log('success', c))\n    .catch(c => console.log('error', c))\n  }\n\n  function onProjectDeletion (projectId) {\n    deleteDoc(doc(firestore, \"projects\", projectId));\n  }\n  function onProjectRename (newLabel, projectId) {\n    setDoc(doc(firestore, \"projects\", projectId), {\n      label: newLabel,\n    }, {\n      merge: true\n    });\n  }\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }}>\n      <AppHeader label=\"Projects\" firestore={firestore} />\n      <section name=\"projectsListSection\" style={theme.card} >\n        <ul name = \"projectsList\" style={theme.ul}> {\n          projects.map((project, i)=> {\n            return(\n              <li \n                key={project.id}\n                style={{\n                  ...theme.li,\n                  backgroundColor: 'white'\n                }}\n              >\n                <span style= {styles.serialNumberIcon}>\n                  {i + 1}\n                </span>\n                <input \n                  name=\"projectLabelTextbox\"\n                  type=\"text\"\n                  onChange={evt => {\n                    var renamedProjects = projects.slice();\n                    renamedProjects[i].label = evt.target.value;\n                    setProjects(renamedProjects);\n                  }}\n                  onKeyPress = {evt => {                     \n                    if (evt.key == 'Enter'){\n                      onProjectRename(evt.target.value, project.id)\n                    }}\n                  }\n                  // Doesn't work as of now\n                  onBlur = {evt => {\n                    if (evt.target.value != project.label){\n                      onProjectRename(evt.target.value, project.id)\n                    }\n                  }}\n                  value={project.label}\n                  style={styles.input} \n                />\n                <span \n                  style= {styles.deleteIcon}\n                  onClick={evt => onProjectDeletion(project.id)}\n                >\n                  -\n                </span>\n                <Link \n                  style= {styles.nextIcon}\n                  to={`/project/${project.id}`}\n                >\n                  >\n                </Link>\n              </li>\n            )\n          })\n        }\n        </ul>\n      </section>\n\n      <section name=\"newProject\" style= {theme.card}>  \n        <input\n          name=\"newProjectTextBox\"\n          type=\"text\" \n          placeholder=\"Add a Project\"\n          autoFocus\n          value={newProjectTextboxValue}\n          onKeyPress={evt => {\n            if (evt.key === 'Enter'){\n              onNewProjectAddition(evt.target.value);\n              setNewProjectTextboxValue('')\n            }\n          }}\n          onChange= {evt => {\n            setNewProjectTextboxValue(evt.target.value)\n          }}\n          style={styles.input} />\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  input: {\n    border: 'none',\n    marginLeft: '5px',\n    outline: 'none',\n    fontSize: '16pt'\n  },\n  deleteIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: '#ee4422',\n    width: '20px',\n    textAlign: 'center'\n  },\n  nextIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: 'lightblue',\n    width: '20px',\n    textAlign: 'center'\n  },\n  serialNumberIcon: {\n    width: '20px',\n    height: '20px',\n    alignSelf: 'center'\n  }\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport React from 'react';\n\nimport {createTheme, ThemeProvider} from '@mui/material'\n\nimport ProjectView from \"./ProjectView/ProjectView\";\nimport HomeView from './HomeView/HomeView';\nimport SearchView from \"./SearchView/SearchView\";\nimport ItemView from \"./ItemView/ItemView\";\nimport ProjectsView from \"./ProjectsView/ProjectsView\";\nimport {firestore} from './firebase';\nimport {enableNetwork, disableNetwork} from 'firebase/firestore'\nimport fuseInstance from './data/search';\nimport {\n  createBrowserRouter,\n  RouterProvider,\n} from \"react-router-dom\";\n\n// Change isSyncing State (that changes animation)\n// Set Firestore to Online and check for data from the server\nfunction syncFirestore () {\n  console.log('Syncing');  \n  enableNetwork(firestore);\n  setTimeout(() => {\n    disableNetwork(firestore)\n  }, 5000)\n}\n\nsyncFirestore();\nsetInterval(syncFirestore, 10000)\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FFCA28'\n    }\n  },\n  shape: {\n    borderRadius: 6\n  },\n  typography: {\n    fontFamily: [\n      'Proxima Nova Condensed',\n      'Roboto Condensed',\n      'sans-serif'\n    ].join(','),\n    fontSize: 12\n  }\n})\ntheme.spacing(1);\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nconst router = createBrowserRouter([\n  {\n    path: \"/\",\n    element: <HomeView firestore={firestore} />,\n    errorElement: <HomeView firestore={firestore} />\n  }, \n  {\n    path: '/projects',\n    element: <ProjectsView firestore={firestore} />\n  },\n  {\n    path: '/search',\n    element: <SearchView firestore={firestore} fuseInstance={fuseInstance} />\n  }, {\n    path: '/project/:projectId',\n    element: <ProjectView firestore={firestore} />\n  }, {\n    path: '/item/:itemId',\n    element: <ItemView firestore={firestore} />\n  }\n\n]);\nroot.render(\n  \n  <StrictMode>\n    <ThemeProvider theme={theme}>\n    {/* <ThemeContext.Provider value=\"dark\"> */}\n      <RouterProvider router={router} />\n      {/* <ProjectView /> */}\n      {/* <HomeView firestore={firestore} /> */}\n      {/* <SearchView /> */}\n    {/* </ThemeContext.Provider> */}\n    </ThemeProvider>\n  </StrictMode>\n);\n"],"sourceRoot":""}