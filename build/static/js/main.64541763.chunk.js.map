{"version":3,"sources":["ThemeContext.js","images/sync-icon.svg","AppHeader.js","images/project-icon.svg","images/add-icon.svg","images/search-icon.svg","SearchBar.js","ProjectView/ProjectView.js","HomeView/HomeView.js","SearchView/NotifySection.js","firebase.js","data/traverser.js","data/search.js","SearchView/SearchResults.js","SearchView/SearchView.js","images/icons/chevron-down.svg","images/icons/arrow-counterclockwise.svg","images/icons/arrow-clockwise.svg","images/icons/type-bold.svg","images/icons/type-italic.svg","images/icons/type-underline.svg","images/icons/type-strikethrough.svg","images/icons/code.svg","images/icons/link.svg","images/icons/text-left.svg","images/icons/text-center.svg","images/icons/text-right.svg","images/icons/justify.svg","ItemView/ToolbarPlugin.js","ItemView/Editor.js","ItemView/ItemView.js","ProjectsView/ProjectsView.js","index.js"],"names":["h1","h2","fontSize","overflow","minHeight","card","borderRadius","backgroundColor","boxShadow","flex","margin","ul","listStyleType","li","display","borderTop","padding","width","h3","AppHeader","label","isSyncing","firestore","onSyncButtonClick","navigate","useNavigate","style","styles","container","header","marginRight","onClick","evt","src","syncIcon","alt","animation","syncButton","borderBottom","color","paddingLeft","fontWeight","alignSelf","marginLeft","cursor","SearchBar","to","button","project","image","projectIcon","add","addIcon","search","searchIcon","height","marginTop","marginBottom","ProjectView","projectId","useParams","React","useState","setProject","items","setItems","newListItemTextboxValue","setNewListItemTextboxValue","onItemRename","newLabel","item","console","log","setDoc","doc","id","merge","useEffect","getDoc","then","docSnap","exists","data","catch","e","onSnapshot","query","collection","where","snapshot","docs","map","d","flexDirection","name","theme","i","serialNumberIcon","type","onChange","renamedItems","slice","target","value","onKeyPress","key","onBlur","input","deleteIcon","deleteDoc","onItemDeletion","nextIcon","placeholder","autoFocus","addDoc","c","border","outline","textAlign","HomeView","projects","setProjects","arrow","alignItems","textDecoration","NotifySection","isNotifySectionVisibleValue","notifySectionMessageValue","viewButtonLinkIntermediaryValue","h4","ViewButtonLink","Button","variant","ViewButton","maxHeight","paddingTop","fontFamily","firebaseApp","initializeApp","apiKey","authDomain","storageBucket","messagingSenderId","appId","measurementId","initializeFirestore","cacheSizeBytes","CACHE_SIZE_UNLIMITED","setLogLevel","enableMultiTabIndexedDbPersistence","err","code","disableNetwork","TraverseFilter","traverse","o","innerTraversal","root","queue","push","length","shift","path","memory","has","Object","keys","itemPath","concat","reject","Set","traverser","fuse","Fuse","includeScore","includeMatches","ignoreLocation","ignoreFieldNorm","docChanges","forEach","change","docData","docID","content","JSON","parse","remove","SearchResults","fuseSearchResults","result","matchedIndices","matches","indices","sort","a","b","searchValue","searchResultLink","searchResult","emphasis","substr","whiteSpace","textOverflow","SearchView","fuseInstance","searchTextboxIntermediateValue","setSearchTextboxIntermediateValue","projectsAutocompleteIntermediaryValue","setProjectsAutocompleteIntermediaryValue","setViewButtonLinkIntermediaryValue","setNotifySectionMessageValue","setIsNotifySectionVisibleValue","searchResults","setSearchResults","searchTextboxRef","useRef","isInbox","SearchResultsSection","RadioButtonsSection","FormControlLabel","control","Radio","labelPlacement","AutocompletesSection","options","blurInputOnSelect","openMenuOnFocus","newOption","baseStyles","state","SearchTextboxSection","TextField","searchTextbox","multiline","ref","buttonsSection","addButoon","preventDefault","newID","uuidv4","current","focus","clearButton","ProjectAutocomplete","ItemAutocomplete","justifyContent","flexWrap","lineHeight","supportedBlockTypes","blockTypeToBlockName","h5","ol","paragraph","quote","Divider","className","positionEditorElement","editor","rect","opacity","top","left","window","pageYOffset","pageXOffset","offsetWidth","FloatingLinkEditor","editorRef","inputRef","mouseDownRef","linkUrl","setLinkUrl","isEditMode","setEditMode","lastSelection","setLastSelection","updateLinkEditor","useCallback","selection","$getSelection","$isRangeSelection","node","getSelectedNode","parent","getParent","$isLinkNode","getURL","editorElem","nativeSelection","getSelection","activeElement","document","rootElement","getRootElement","isCollapsed","contains","anchorNode","domRange","getRangeAt","inner","firstElementChild","getBoundingClientRect","mergeRegister","registerUpdateListener","editorState","read","registerCommand","SELECTION_CHANGE_COMMAND","getEditorState","event","onKeyDown","dispatchCommand","TOGGLE_LINK_COMMAND","href","rel","role","tabIndex","onMouseDown","Select","hidden","option","anchor","getNode","focusNode","isBackward","$isAtNodeEnd","BlockOptionsDropdownList","blockType","toolbarRef","setShowBlockOptionsDropDown","dropDownRef","toolbar","dropDown","bottom","handle","addEventListener","removeEventListener","update","$wrapLeafNodesInElements","$createParagraphNode","$createHeadingNode","INSERT_UNORDERED_LIST_COMMAND","REMOVE_LIST_COMMAND","INSERT_ORDERED_LIST_COMMAND","$createQuoteNode","$createCodeNode","ToolbarPlugin","useLexicalComposerContext","canUndo","setCanUndo","canRedo","setCanRedo","setBlockType","selectedElementKey","setSelectedElementKey","showBlockOptionsDropDown","codeLanguage","setCodeLanguage","setIsRTL","isLink","setIsLink","isBold","setIsBold","isItalic","setIsItalic","isUnderline","setIsUnderline","isStrikethrough","setIsStrikethrough","isCode","setIsCode","updateToolbar","element","getKey","getTopLevelElementOrThrow","elementKey","getElementByKey","$isListNode","parentList","$getNearestNodeOfType","ListNode","getTag","$isHeadingNode","getType","$isCodeNode","getLanguage","getDefaultCodeLanguage","hasFormat","$isParentElementRTL","_payload","newEditor","CAN_UNDO_COMMAND","payload","CAN_REDO_COMMAND","codeLanguges","useMemo","getCodeLanguages","onCodeLanguageSelect","$getNodeByKey","setLanguage","insertLink","disabled","UNDO_COMMAND","undoIcon","REDO_COMMAND","redoIcon","chevronDownIcon","createPortal","body","FORMAT_TEXT_COMMAND","boldIcon","italicIcon","underlineIcon","strikeThroughIcon","codeIcon","linkIcon","FORMAT_ELEMENT_COMMAND","leftAlignIcon","centerAlignIcon","rightAlignIcon","justifyAlignIcon","Editor","initialEditorState","onEditorStateChange","cutomEditorState","editorConfig","ExampleTheme","onError","error","nodes","HeadingNode","ListItemNode","QuoteNode","CodeNode","CodeHighlightNode","TableNode","TableCellNode","TableRowNode","AutoLinkNode","LinkNode","LexicalComposer","initialConfig","contentEditable","Placeholder","ignoreSelectionChange","ignoreI","transformers","TRANSFORMERS","CustomContentPlugin","customEditorState","parseEditorState","setEditorState","ltr","rtl","heading","list","nested","listitem","link","text","bold","italic","overflowed","hashtag","underline","strikethrough","underlineStrikethrough","codeHighlight","atrule","attr","boolean","builtin","cdata","char","class","comment","constant","deleted","doctype","entity","function","important","inserted","keyword","namespace","number","operator","prolog","property","punctuation","regex","selector","string","symbol","tag","url","variable","ItemView","itemId","setItem","setCustomEditorState","saveEditorStateDebounced","_debounce","stringify","ProjectsView","newProjectTextboxValue","setNewProjectTextboxValue","onProjectRename","renamedProjects","projectLabel","syncFirestore","enableNetwork","setTimeout","setInterval","createTheme","palette","primary","main","shape","typography","join","spacing","getElementById","createRoot","router","createBrowserRouter","errorElement","render","ThemeProvider"],"mappings":"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","file":"static/js/main.64541763.chunk.js","sourcesContent":["export default {\n  h1: {\n\n  },\n  h2: {\n    fontSize: '24px',\n    overflow: 'hidden',\n    minHeight: '40px'\n  },\n  card: {\n    borderRadius: '6px',\n    backgroundColor: 'white',\n    boxShadow: '0px 1px 2px rgba(0, 0, 0, 0.25), 0px 1px 3px 1px rgba(0, 0, 0, 0.25)',\n    flex: '1 1 auto',\n    overflow: 'auto',\n    minHeight: 0,\n    margin: '8px'\n  },\n  ul: {\n    listStyleType: 'none'\n\n  },\n  li: {\n    display: 'flex',\n    borderTop: '1px solid #D9D9D9',\n    padding:'10px',\n    width:'100%'\n\n  },\n  h3: {\n\n  }\n}\n\n","export default __webpack_public_path__ + \"static/media/sync-icon.5bae7c75.svg\";","//import {enableNetwork, disableNetwork, collection, onSnapshot, getDocsFromServer} from 'firebase/firestore';\nimport React from 'react';\nimport {useNavigate} from 'react-router-dom';\nimport syncIcon from './images/sync-icon.svg';\n\nexport default function AppHeader({label, firestore, isSyncing, onSyncButtonClick}) {\n  let navigate = useNavigate();\n  //var [isSyncing, setIsSyncing] = React.useState(false)\n  \n  return (\n    <div style={styles.container}>\n      <div\n        style={styles.header}\n      >\n        <span\n          style={{\n            marginRight: '20px'\n          }}\n          onClick={evt=> navigate(-1)}>\n          {\"<\"}\n        </span>\n        <span>\n          {label}\n        </span>\n      </div>\n      <img src={syncIcon} alt=\"Sync Icon\"\n        style={{\n            animation: isSyncing ? 'animName 1.75s ease infinite' : '', \n            ...styles.syncButton\n        }}\n        onClick={onSyncButtonClick}\n      />\n      \n      {/* <img alt=\"Loading\" src={loaderImage} /> */}\n    </div>\n  );\n}\n\nvar styles = {\n  container: {\n    width: '100%',\n    backgroundColor: '#fff',\n    minHeight: '53px',\n    display: 'flex',\n    borderBottom: '1px solid #eee'\n  },\n  header: {\n    color: '#000',\n    paddingLeft: '30px',\n    fontSize: '24px',\n    fontWeight: 900,\n    alignSelf: 'center',\n  },\n  syncButton: {\n    alignSelf: 'center',\n    marginLeft: 'auto',\n    marginRight: '20px',\n    cursor: 'pointer',\n    width: 40\n  }\n}","export default __webpack_public_path__ + \"static/media/project-icon.53d0f8da.svg\";","export default __webpack_public_path__ + \"static/media/add-icon.8eb448d4.svg\";","export default __webpack_public_path__ + \"static/media/search-icon.8fe0086d.svg\";","import {Link} from 'react-router-dom';\nimport React from 'react';\nimport projectIcon from './images/project-icon.svg';\nimport addIcon from './images/add-icon.svg';\nimport searchIcon from './images/search-icon.svg';\n\nexport default function SearchBar({label, firestore}) {\n  return (\n    <div style={styles.container}>\n      <Link to={`/projects`}>\n        <div \n          style={{\n            ...styles.button,\n            ...styles.project\n          }}>\n          <img \n            style={{\n              ...styles.image\n            }}\n            src={projectIcon}\n          />\n        </div>\n      </Link>\n\n      <div style={{\n          ...styles.button,\n          ...styles.add\n      }}>\n        <img \n          style={{\n            ...styles.image\n          }}\n          src={addIcon}\n        />\n      </div>\n      <Link to={`/search`}>\n        <div style={{\n            ...styles.button,\n            ...styles.search\n        }}>\n          <img   style={{\n              ...styles.image\n            }}\n            src={searchIcon}\n          />\n        </div>\n      </Link>\n\n    </div>\n  );\n}\n\nvar styles =  {\n  container : {\n    width: '100%',\n    backgroundColor: '#fff',\n    minHeight: '53px',\n    display: 'flex',\n    backgroundColor: '#D9D9D9',\n    marginTop: 'auto'\n  },\n  button: {\n    width: '48px',\n    height: '48px',\n    borderRadius: '12px',\n    marginRight: '10px',\n    display: 'flex',\n    backgroundColor: 'white',\n    marginTop: '8px',\n    marginBottom: '8px'\n  },\n  project: {\n    marginLeft: '10px'\n  },\n  add: {\n    marginLeft: 'auto'\n\n  },\n  search: {\n  },\n  image: {\n    width: '26px',\n    margin: 'auto'\n  }\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport {useParams, Link} from 'react-router-dom';\nimport {addDoc, setDoc, deleteDoc, doc, getDoc, onSnapshot, query, collection, where} from 'firebase/firestore';\n\n\nexport default function ProjectView({firestore}) {\n  const {projectId} = useParams();\n  var [project, setProject] = React.useState({\n    label:''\n  })\n  // Sate syncronised with the DB\n  var [items, setItems] = React.useState([]);\n\n  let [newListItemTextboxValue, setNewListItemTextboxValue] = React.useState('');\n\n  React.useEffect(()=> {    \n    getDoc(doc(firestore, \"projects\", projectId))\n    .then(docSnap =>{\n      if (docSnap.exists()) {\n        setProject({\n          ...docSnap.data(),\n          id: projectId\n        })\n      } else {\n        // doc.data() will be undefined in this case\n      }\n    })\n    .catch(e=> console.log('error', e))\n    \n    onSnapshot(\n      query(collection(firestore, 'lists'), where('projectId', '==', projectId)),\n      (snapshot) => {\n        setItems(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  function onNewItemAddition (item){\n    \n    addDoc(collection(firestore, \"lists\"), {\n      ...item,\n      projectId: project.id\n    })\n    .then(c => console.log('success', c))\n    .catch(c => console.log('error', c))\n  }\n\n  function onItemDeletion (evt, item) {\n    deleteDoc(doc(firestore, \"lists\", item.id));\n  }\n  function onItemRename (newLabel, item) {\n    console.log('onItemRename', newLabel, item)\n    setDoc(doc(firestore, \"lists\", item.id), {\n      label: newLabel,\n    }, {\n      merge: true\n    });\n  }\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }}>\n      <AppHeader label={project.label} firestore={firestore} />\n      <section name=\"itemsListSection\" style={theme.card} >\n        <ul name = \"itemsList\" style={theme.ul}> {\n          items.map((item, i)=> {\n            return(\n              <li \n                key={item.id}\n                style={{\n                  ...theme.li,\n                  backgroundColor: 'white'\n                }}\n              >\n                <span style= {styles.serialNumberIcon}>\n                  {i + 1}\n                </span>\n                <input \n                  name=\"itemLabelTextbox\"\n                  type=\"text\"\n                  onChange={evt => {\n                    var renamedItems = items.slice();\n                    renamedItems[i].label = evt.target.value;\n                    setItems(renamedItems);\n                  }}\n                  onKeyPress = {evt => {                     \n                    if (evt.key == 'Enter'){\n                      onItemRename(evt.target.value, item)\n                    }}\n                  }\n                  // Doesn't work as of now\n                  onBlur = {evt => {\n                    if (evt.target.value != item.label){\n                      onItemRename(evt.target.value, item)\n                    }\n                  }}\n                  value={item.label}\n                  style={styles.input} \n                />\n                <span \n                  style= {styles.deleteIcon}\n                  onClick={evt => onItemDeletion(evt, item)}\n                >\n                  -\n                </span>\n                <Link \n                  style= {styles.nextIcon}\n                  to={`/item/${item.id}`}\n                >\n                  >\n                </Link>\n              </li>\n            )\n          })\n        }\n        </ul>\n      </section>\n\n      <section name=\"newItem\" style= {theme.card}>  \n        <input\n          name=\"newListItemTextBox\"\n          type=\"text\" \n          placeholder=\"Add an Item\"\n          autoFocus\n          value={newListItemTextboxValue}\n          onKeyPress={evt => {\n            if (evt.key === 'Enter'){\n              onNewItemAddition({\n                label: evt.target.value\n              });\n              setNewListItemTextboxValue('')\n            }\n          }}\n          onChange= {evt => {\n            setNewListItemTextboxValue(evt.target.value)\n          }}\n          style={styles.input} />\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  input: {\n    border: 'none',\n    marginLeft: '5px',\n    outline: 'none',\n    fontSize: '16pt'\n  },\n  deleteIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: '#ee4422',\n    width: '20px',\n    textAlign: 'center'\n  },\n  nextIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: 'lightblue',\n    width: '20px',\n    textAlign: 'center'\n  },\n  serialNumberIcon: {\n    width: '20px',\n    height: '20px',\n    alignSelf: 'center'\n  }\n}\n","import \"../styles.css\";\nimport theme from '../ThemeContext';\nimport AppHeader from \"../AppHeader\";\nimport {query, collection, onSnapshot} from 'firebase/firestore';\nimport SearchBar from '../SearchBar';\nimport { Link } from \"react-router-dom\";\nimport React from \"react\";\n\n\nexport default function HomeView({firestore}) {\n  var [projects, setProjects] = React.useState([]);\n  var [items, setItems] = React.useState([]);\n  React.useEffect(()=> {\n    onSnapshot(\n      query(collection(firestore, 'projects')),\n      (snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n    onSnapshot(\n      query(collection(firestore, 'lists')),\n      (snapshot) => {\n        setItems(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  \n  return (\n    <div style={styles.container}>\n      <AppHeader label=\"Super Notes\" firestore={firestore} />\n\n      <section style={theme.card}> \n        <h2 style={styles.h2}> \n          Recent Projects \n        </h2>\n        <ul>\n          {\n            projects.map(project => {\n              return(\n              <li style={theme.li} key={project.id}>\n                <span> {project.label} </span>\n                <Link style={styles.arrow} to={`/project/${project.id}`}> {\">\"} </Link>\n              </li>)\n            })\n          }\n        </ul>\n      </section>\n      \n      <section style={theme.card}> \n        <h2 style={theme.h2}> \n          Recent Items \n        </h2>\n        <ul>\n          {\n            items.map(item => {\n              return(\n              <li style={theme.li} key={item.id}>\n                <span> {item.label} </span>\n                <Link style={styles.arrow} to={`/item/${item.id}`}> {\">\"} </Link>\n              </li>)\n            })\n          }\n        </ul>\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    alignItems: 'stretch'\n  },\n  arrow: {\n    marginLeft: 'auto',\n    fontSize: '18px',\n    fontWeight: 900,\n    textDecoration: 'none',\n    color: 'black'\n  }\n}\n\n","\nimport theme from '../ThemeContext'\nimport {Link} from 'react-router-dom';\nimport {Button} from \"@mui/material\";\n\nexport default function NotifySection ({isNotifySectionVisibleValue, notifySectionMessageValue, viewButtonLinkIntermediaryValue }){\n  return (\n    <section name=\"NotifySection\"\n      style={{\n        ...styles.NotifySection,\n        display: isNotifySectionVisibleValue ? 'flex' : 'none'\n      }}\n    >\n      <h4 style={styles.h4}> {notifySectionMessageValue} </h4>\n      <Link style={styles.ViewButtonLink} name=\"ViewButtonLink\" to={viewButtonLinkIntermediaryValue}>\n        <Button name=\"ViewButton\"\n          variant=\"contained\"\n          style={styles.ViewButton}\n        > \n          VIEW ITEM \n        </Button>\n      </Link>\n    </section>\n  )\n}\n\nvar styles = {\n  NotifySection: {\n    ...theme.card,\n    height: '40px',\n    maxHeight: '40px',\n    padding: '0px',\n    paddingTop: '0px',\n    display: 'flex',\n    flexDirection: 'row',\n    borderRadius: '6px'\n  },\n  h4: {\n    marginLeft: '8px',\n    fontSize: '12px',\n    fontFamily: 'Proxima Nova Condensed',\n    marginTop: 'auto',\n    marginBottom: 'auto',\n    alignSelf: 'middle',\n    fontWeight: 900\n  },\n}","import {initializeApp} from 'firebase/app';\nimport {\n  initializeFirestore, \n  CACHE_SIZE_UNLIMITED,\n  query, \n  getDocs, \n  setDoc, \n  collection,\n  disableNetwork,\n  enableIndexedDbPersistence,\n  enableMultiTabIndexedDbPersistence,\n  setLogLevel\n} from 'firebase/firestore';\n\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyAZKiwwf6TbJJQdy--4LG2flJCpSAx7dZk\",\n  authDomain: \"dream-factory-3bb67.firebaseapp.com\",\n  projectId: \"dream-factory-3bb67\",\n  storageBucket: \"dream-factory-3bb67.appspot.com\",\n  messagingSenderId: \"242960121837\",\n  appId: \"1:242960121837:web:f56c55f2b5019f96e8b1e4\",\n  measurementId: \"G-BB7HEFVQZ8\"\n})\nconst firestore = initializeFirestore(firebaseApp, {\n  cacheSizeBytes: CACHE_SIZE_UNLIMITED,\n  setLogLevel: 'debug'\n})\nenableMultiTabIndexedDbPersistence(firestore)\n//enableIndexedDbPersistence(firestore)\n.catch((err) => {\n  if (err.code == 'failed-precondition') {\n      // Multiple tabs open, persistence can only be enabled\n      // in one tab at a a time.\n      // ...\n  } else if (err.code == 'unimplemented') {\n      // The current browser does not support all of the\n      // features required to enable persistence\n      // ...\n  }\n});\n\ndisableNetwork(firestore)\nexport {\n  firebaseApp,\n  firestore\n}","var TraverseFilter;\n(function (TraverseFilter) {\n    /** prevents the children from being iterated. */\n    TraverseFilter[\"reject\"] = \"reject\";\n})(TraverseFilter || (TraverseFilter = {}));\nfunction* traverse(o) {\n    const memory = new Set();\n    function* innerTraversal(root) {\n        const queue = [];\n        queue.push([root, []]);\n        while (queue.length > 0) {\n            const [o, path] = queue.shift();\n            if (memory.has(o)) {\n                // we've seen this object before don't iterate it\n                continue;\n            }\n            // add the new object to our memory.\n            memory.add(o);\n            for (var i of Object.keys(o)) {\n                const item = o[i];\n                const itemPath = path.concat([i]);\n                const filter = yield [i, item, itemPath, o];\n                if (filter === TraverseFilter.reject)\n                    continue;\n                if (item !== null && typeof item === \"object\") {\n                    //going one step down in the object tree!!\n                    queue.push([item, itemPath]);\n                }\n            }\n        }\n    }\n    yield* innerTraversal(o);\n}\n\nexport default {traverse: traverse};","import Fuse from 'fuse.js'\nimport {firestore} from '../firebase';\nimport traverse from './traverser'\nimport {onSnapshot, query, collection} from 'firebase/firestore';\nvar traverser = traverse.traverse;\n\n\nvar items = [];\n\n// Intialise Fuse on each load\nconst fuse = new Fuse(items, {\n  // isCaseSensitive: false,\n  includeScore: true,\n  // shouldSort: true,\n  includeMatches: true,\n  // findAllMatches: false,\n  // minMatchCharLength: 1,\n  // location: 0,\n  // threshold: 0.6,\n  // distance: 100,\n  // useExtendedSearch: false,\n  ignoreLocation: true,\n  ignoreFieldNorm: true,\n  // fieldNormWeight: 1,\n  keys: [\n    \"label\",\n    \"content\",\n    \"id\"\n  ]\n});\n\nonSnapshot(\n  query(collection(firestore, 'lists')),snapshot => {\n    snapshot.docChanges().forEach((change) => {\n      var docData = change.doc.data()\n      var docID = change.doc.id\n      \n      // Strip just the text content from the Lexical Editor State\n      if (docData.content){\n        var content = '';\n        for (const [key, value] of traverser(JSON.parse(docData.content))) {\n          if (key == 'text')\n            content = content + ' ' + value;\n        }\n      }\n\n      // Initial load and new stuff added\n      if (change.type === \"added\") {\n        fuse.add({\n          ...docData,\n          content,\n          id: docID\n        })\n      }\n\n      // Remove old entry and re-add whole entry again\n      else if (change.type === \"modified\") {\n        fuse.remove(d=> d.id == docID)\n        fuse.add({\n          ...docData,\n          content,\n          id: docID\n        })\n        \n      }\n      else if (change.type === \"removed\") {\n        fuse.remove(d=> d.id == docID)\n      }\n    })\n  }\n)\n\nexport default fuse;\n\n","import React from 'react';\nimport fuse from '../data/search';\nimport {Link} from 'react-router-dom';\nexport default function SearchResults({fuseSearchResults}) {\n  return(\n    <ul> {\n      fuseSearchResults.map(result => {\n\n        // Fuse gives big bunch of indices but it doesn't\n        // give one with the best score so approximating here\n        // https://github.com/krisk/Fuse/issues/409\n        var matchedIndices = result.matches[0].indices.sort( (a, b) => b[1] - b[0] - (a[1] - a[0]))[0]\n        var searchValue = result.matches[0].value;\n        //debugger;\n        return(\n          <Link\n            style={styles.searchResultLink}\n            to= {`/item/${result.item.id}`}\n          >\n            <li style={styles.searchResult}> \n              <h3 style={styles.h3}> {result.item.label} </h3>\n              <span style={styles.emphasis}>\n                {searchValue.substr(matchedIndices[0], matchedIndices[1]+1)}\n              </span>\n              {searchValue.substr(matchedIndices[1]+1, searchValue.length)}\n            </li>\n          </Link>\n        )\n\n      })\n    }</ul>    \n  )\n  \n}\n\nvar styles = {\n  searchResultLink: {\n    textDecoration: 'none',\n    color: 'inherit'\n  },\n  searchResult : {\n    fontFamily: 'sans-serif',\n    whiteSpace: 'nowrap',\n    fontWeight: 400,\n    fontSize: 13,\n    margin: 5,\n//    lineHeight: 14,\n    height: 'auto',\n    padding: 5,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    display: 'block'\n  },\n  emphasis: {\n    backgroundColor: 'yellow',\n    color: 'red',\n\n  }\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport {Autocomplete, TextField, Button, Radio, FormControlLabel} from \"@mui/material\";\nimport SearchBar from '../SearchBar';\nimport NotifySection from './NotifySection';\nimport SearchResults from './SearchResults';\nimport CreatableSelect from 'react-select/creatable';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {onSnapshot, query, collection, addDoc, setDoc, doc} from 'firebase/firestore';\n\n\nexport default function SearchView({firestore, fuseInstance}) {\n  var [projects, setProjects] = React.useState([]);\n  var [searchTextboxIntermediateValue, setSearchTextboxIntermediateValue] = React.useState('');\n  var [projectsAutocompleteIntermediaryValue, setProjectsAutocompleteIntermediaryValue] = React.useState('');\n  var [viewButtonLinkIntermediaryValue, setViewButtonLinkIntermediaryValue] = React.useState('');\n  var [notifySectionMessageValue, setNotifySectionMessageValue] = React.useState(\n    'ADDED AS ITEM TO'\n  );\n  var [isNotifySectionVisibleValue, setIsNotifySectionVisibleValue] = React.useState(false);\n  var [searchResults, setSearchResults] = React.useState([]);\n  var  searchTextboxRef = React.useRef(null);\n  React.useEffect(()=> {    \n    onSnapshot(\n      query(collection(firestore, 'projects')),(snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          if (d.data().isInbox){\n            setProjectsAutocompleteIntermediaryValue({\n              ...d.data(),\n              id: d.data \n            })\n          }\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n        \n      }\n    )\n  }, [firestore]);\n\n  function onSearchTextBoxChange(evt){\n    setSearchTextboxIntermediateValue(evt.target.value)\n    setSearchResults(fuseInstance.search(evt.target.value))\n  }\n\n  return (\n    <div style={styles.container}>\n      <AppHeader label=\"Search / Add\" firestore={firestore} />\n      <section name=\"SearchResultsSection\" style={styles.SearchResultsSection}>\n        <SearchResults fuseSearchResults={searchResults} />\n      </section>\n      <section name=\"SearchBoxSection\"\n        style={{\n          ...theme.card\n        }}\n      >\n        <section name=\"RadioButtonsSection\" style={styles.RadioButtonsSection}>\n          <FormControlLabel\n            value=\"top\"\n            control={<Radio />}\n            label=\"Add as Item to Project\"\n            labelPlacement=\"end\"\n            name=\"addOptionRadio\"\n          />\n          <FormControlLabel\n            value=\"top\"\n            control={<Radio />}\n            label=\"Add as Content to Item\"\n            labelPlacement=\"start\"\n            name=\"addOptionRadio\"\n          />\n        </section>\n        <section name=\"AutocompletesSection\" style={styles.AutocompletesSection}>\n          <CreatableSelect\n            options={projects} \n            blurInputOnSelect\n            openMenuOnFocus\n            onChange = {(newOption) => setProjectsAutocompleteIntermediaryValue(newOption)}\n            value={projectsAutocompleteIntermediaryValue}\n            styles={{\n              control: (baseStyles, state) => ({\n                ...baseStyles,\n                width: '200px',\n\n              }),\n            }}\n          />\n          {/* <Autocomplete name= \"ItemAutocomplete\"\n            sx ={styles.ItemAutocomplete}\n            //value={projectsAutocompleteIntermediaryValue}\n            //label=\"Item\"\n            disablePortal\n            freeSolo\n            options={projects}\n            //autoComplete={true}\n            // onBlur={evt=> {\n            //   console.log('onBlur', evt.target.value)\n            //   if (evt.target.value == ''){\n            //     console.log('inbox project',projects,  projects.find(p=> p.isInbox == true))\n            //     setProjectsAutocompleteIntermediaryValue(projects.find(p=> (p.isInbox == true)))\n            //   }\n            // }}\n            // onChange= {(evt, newOption)=>{\n            //   if (evt.target.value == ''){\n            //     console.log('inbox project',projects,  projects.find(p=> p.isInbox == true))\n            //     setProjectsAutocompleteIntermediaryValue(projects.find(p=> (p.isInbox == true)))\n            //   }\n            //   console.log('newOption', newOption)\n            // }}\n            renderInput={(params) => \n              <TextField {...params} />\n            }\n          /> */}\n        </section>\n        <section name=\"SearchTextboxSection\" style={styles.SearchTextboxSection}>\n          <TextField name=\"SearchTextbox\"\n            placeholder=\"Search or Add Item\"\n            autoFocus\n            style={styles.searchTextbox}\n            multiline={true}\n            type=\"text\"\n            value={searchTextboxIntermediateValue}\n            onChange={onSearchTextBoxChange}\n            ref={searchTextboxRef}            \n          />\n          <section name=\"buttonsSection\" style={styles.buttonsSection}>\n            <Button name=\"addButton\"\n              variant=\"contained\"\n              style={styles.addButoon}\n              onClick={evt=> {\n                evt.preventDefault();\n                console.log('projectsAutocompleteIntermediaryValue', projectsAutocompleteIntermediaryValue)\n                var newID = uuidv4()\n                setDoc(doc(firestore, \"lists\", newID), {\n                  label: searchTextboxIntermediateValue,\n                  projectId: projectsAutocompleteIntermediaryValue['id']\n                })\n                .catch(c => console.log('error', c))\n                setViewButtonLinkIntermediaryValue(`/item/${newID}`)\n                setIsNotifySectionVisibleValue(true);\n                setNotifySectionMessageValue(`ADDED AS ITEM TO ${projectsAutocompleteIntermediaryValue.label}`);\n                setSearchTextboxIntermediateValue('')\n                searchTextboxRef.current.focus();  \n              }}\n            > \n              ADD \n            </Button>\n            <Button name=\"clearButton\"\n              variant=\"contained\"\n              style={styles.clearButton}\n              onClick= {evt =>{\n                setSearchTextboxIntermediateValue('')\n                searchTextboxRef.current.focus();\n              }} > \n              CLEAR \n            </Button>\n          </section>\n        </section>\n      </section>\n      <NotifySection \n        isNotifySectionVisibleValue={isNotifySectionVisibleValue}\n        notifySectionMessageValue={notifySectionMessageValue}\n        viewButtonLinkIntermediaryValue={viewButtonLinkIntermediaryValue}\n      />\n      <SearchBar />\n    </div>\n  )\n  \n}\nvar styles = {\n  container: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  SearchResultsSection : {\n    ...theme.card,\n    flex: 100\n  },\n\n  AutocompletesSection: {\n    display: 'flex',\n    padding: 8,\n\n  },\n  ProjectAutocomplete: {\n    flex: 1,\n    backgroundColor: 'white',\n    marginRight: 1\n  },\n  ItemAutocomplete: {\n    flex: 2,\n  },\n  RadioButtonsSection: {\n    display: 'flex',\n    padding: 8,\n    fontWeight: 'black',\n    justifyContent: 'space-between',\n    fontWeight: 900,\n    fontSize: '14px'\n  },\n  SearchTextboxSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    margin: 4,\n    padding: 4,\n    flexWrap: 'wrap',\n    width: '100%',\n  },\n  searchTextbox: {\n    flex: 1,\n    marginRight: 8\n  },\n  buttonsSection: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: 64,\n    marginRight: 16\n  },\n  clearButton: {\n    height: 40,\n    width: 64,\n    margin: 4\n  },\n  addButoon: {\n    fontWeight: 900,\n    height: 40,\n    width: 64,\n    margin: 4\n  },\n  ViewButton: {\n    height: '100%',\n    boxShadow: 'none',\n    backgroundColor: 'transparent',\n    fontWeight: 900,\n    width: 64,\n    lineHeight: '14px'\n  },\n  ViewButtonLink: {\n    textDecoration: 'none',\n    marginLeft: 'auto',\n    marginRight: '8px',\n  }\n\n}","export default __webpack_public_path__ + \"static/media/chevron-down.8624f04f.svg\";","export default __webpack_public_path__ + \"static/media/arrow-counterclockwise.48745dc8.svg\";","export default __webpack_public_path__ + \"static/media/arrow-clockwise.2ba77545.svg\";","export default __webpack_public_path__ + \"static/media/type-bold.b3bec3f3.svg\";","export default __webpack_public_path__ + \"static/media/type-italic.d3971b39.svg\";","export default __webpack_public_path__ + \"static/media/type-underline.b41f84ac.svg\";","export default __webpack_public_path__ + \"static/media/type-strikethrough.5d23c904.svg\";","export default __webpack_public_path__ + \"static/media/code.61783513.svg\";","export default __webpack_public_path__ + \"static/media/link.7d2df934.svg\";","export default __webpack_public_path__ + \"static/media/text-left.bd29ab08.svg\";","export default __webpack_public_path__ + \"static/media/text-center.03faef7b.svg\";","export default __webpack_public_path__ + \"static/media/text-right.9dc4cc6e.svg\";","export default __webpack_public_path__ + \"static/media/justify.8c8fc219.svg\";","import { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  CAN_REDO_COMMAND,\n  CAN_UNDO_COMMAND,\n  REDO_COMMAND,\n  UNDO_COMMAND,\n  SELECTION_CHANGE_COMMAND,\n  FORMAT_TEXT_COMMAND,\n  FORMAT_ELEMENT_COMMAND,\n  $getSelection,\n  $isRangeSelection,\n  $createParagraphNode,\n  $getNodeByKey\n} from \"lexical\";\nimport { $isLinkNode, TOGGLE_LINK_COMMAND } from \"@lexical/link\";\nimport {\n  $isParentElementRTL,\n  $wrapLeafNodesInElements,\n  $isAtNodeEnd\n} from \"@lexical/selection\";\nimport { $getNearestNodeOfType, mergeRegister } from \"@lexical/utils\";\nimport {\n  INSERT_ORDERED_LIST_COMMAND,\n  INSERT_UNORDERED_LIST_COMMAND,\n  REMOVE_LIST_COMMAND,\n  $isListNode,\n  ListNode\n} from \"@lexical/list\";\nimport { createPortal } from \"react-dom\";\nimport {\n  $createHeadingNode,\n  $createQuoteNode,\n  $isHeadingNode\n} from \"@lexical/rich-text\";\nimport {\n  $createCodeNode,\n  $isCodeNode,\n  getDefaultCodeLanguage,\n  getCodeLanguages\n} from \"@lexical/code\";\n\nimport chevronDownIcon from '../images/icons/chevron-down.svg';\nimport undoIcon from '../images/icons/arrow-counterclockwise.svg';\nimport redoIcon from '../images/icons/arrow-clockwise.svg';\nimport boldIcon from '../images/icons/type-bold.svg';\nimport italicIcon from '../images/icons/type-italic.svg';\nimport underlineIcon from '../images/icons/type-underline.svg';\nimport strikeThroughIcon from '../images/icons/type-strikethrough.svg';\nimport codeIcon from '../images/icons/code.svg';\nimport linkIcon from '../images/icons/link.svg';\nimport leftAlignIcon from '../images/icons/text-left.svg';\nimport centerAlignIcon from '../images/icons/text-center.svg';\nimport rightAlignIcon from '../images/icons/text-right.svg';\nimport justifyAlignIcon from '../images/icons/justify.svg';\n\nconst LowPriority = 1;\n\nconst supportedBlockTypes = new Set([\n  \"paragraph\",\n  \"quote\",\n  \"code\",\n  \"h1\",\n  \"h2\",\n  \"ul\",\n  \"ol\"\n]);\n\nconst blockTypeToBlockName = {\n  code: \"Code Block\",\n  h1: \"Large Heading\",\n  h2: \"Small Heading\",\n  h3: \"Heading\",\n  h4: \"Heading\",\n  h5: \"Heading\",\n  ol: \"Numbered List\",\n  paragraph: \"Normal\",\n  quote: \"Quote\",\n  ul: \"Bulleted List\"\n};\n\nfunction Divider() {\n  return <div className=\"divider\" />;\n}\n\nfunction positionEditorElement(editor, rect) {\n  if (rect === null) {\n    editor.style.opacity = \"0\";\n    editor.style.top = \"-1000px\";\n    editor.style.left = \"-1000px\";\n  } else {\n    editor.style.opacity = \"1\";\n    editor.style.top = `${rect.top + rect.height + window.pageYOffset + 10}px`;\n    editor.style.left = `${\n      rect.left + window.pageXOffset - editor.offsetWidth / 2 + rect.width / 2\n    }px`;\n  }\n}\n\nfunction FloatingLinkEditor({ editor }) {\n  const editorRef = useRef(null);\n  const inputRef = useRef(null);\n  const mouseDownRef = useRef(false);\n  const [linkUrl, setLinkUrl] = useState(\"\");\n  const [isEditMode, setEditMode] = useState(false);\n  const [lastSelection, setLastSelection] = useState(null);\n\n  const updateLinkEditor = useCallback(() => {\n    const selection = $getSelection();\n    if ($isRangeSelection(selection)) {\n      const node = getSelectedNode(selection);\n      const parent = node.getParent();\n      if ($isLinkNode(parent)) {\n        setLinkUrl(parent.getURL());\n      } else if ($isLinkNode(node)) {\n        setLinkUrl(node.getURL());\n      } else {\n        setLinkUrl(\"\");\n      }\n    }\n    const editorElem = editorRef.current;\n    const nativeSelection = window.getSelection();\n    const activeElement = document.activeElement;\n\n    if (editorElem === null) {\n      return;\n    }\n\n    const rootElement = editor.getRootElement();\n    if (\n      selection !== null &&\n      !nativeSelection.isCollapsed &&\n      rootElement !== null &&\n      rootElement.contains(nativeSelection.anchorNode)\n    ) {\n      const domRange = nativeSelection.getRangeAt(0);\n      let rect;\n      if (nativeSelection.anchorNode === rootElement) {\n        let inner = rootElement;\n        while (inner.firstElementChild != null) {\n          inner = inner.firstElementChild;\n        }\n        rect = inner.getBoundingClientRect();\n      } else {\n        rect = domRange.getBoundingClientRect();\n      }\n\n      if (!mouseDownRef.current) {\n        positionEditorElement(editorElem, rect);\n      }\n      setLastSelection(selection);\n    } else if (!activeElement || activeElement.className !== \"link-input\") {\n      positionEditorElement(editorElem, null);\n      setLastSelection(null);\n      setEditMode(false);\n      setLinkUrl(\"\");\n    }\n\n    return true;\n  }, [editor]);\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          updateLinkEditor();\n        });\n      }),\n\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        () => {\n          updateLinkEditor();\n          return true;\n        },\n        LowPriority\n      )\n    );\n  }, [editor, updateLinkEditor]);\n\n  useEffect(() => {\n    editor.getEditorState().read(() => {\n      updateLinkEditor();\n    });\n  }, [editor, updateLinkEditor]);\n\n  useEffect(() => {\n    if (isEditMode && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isEditMode]);\n\n  return (\n    <div ref={editorRef} className=\"link-editor\">\n      {isEditMode ? (\n        <input\n          ref={inputRef}\n          className=\"link-input\"\n          value={linkUrl}\n          onChange={(event) => {\n            setLinkUrl(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.key === \"Enter\") {\n              event.preventDefault();\n              if (lastSelection !== null) {\n                if (linkUrl !== \"\") {\n                  editor.dispatchCommand(TOGGLE_LINK_COMMAND, linkUrl);\n                }\n                setEditMode(false);\n              }\n            } else if (event.key === \"Escape\") {\n              event.preventDefault();\n              setEditMode(false);\n            }\n          }}\n        />\n      ) : (\n        <>\n          <div className=\"link-input\">\n            <a href={linkUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              {linkUrl}\n            </a>\n            <div\n              className=\"link-edit\"\n              role=\"button\"\n              tabIndex={0}\n              onMouseDown={(event) => event.preventDefault()}\n              onClick={() => {\n                setEditMode(true);\n              }}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction Select({ onChange, className, options, value }) {\n  return (\n    <select className={className} onChange={onChange} value={value}>\n      <option hidden={true} value=\"\" />\n      {options.map((option) => (\n        <option key={option} value={option}>\n          {option}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction getSelectedNode(selection) {\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  const anchorNode = selection.anchor.getNode();\n  const focusNode = selection.focus.getNode();\n  if (anchorNode === focusNode) {\n    return anchorNode;\n  }\n  const isBackward = selection.isBackward();\n  if (isBackward) {\n    return $isAtNodeEnd(focus) ? anchorNode : focusNode;\n  } else {\n    return $isAtNodeEnd(anchor) ? focusNode : anchorNode;\n  }\n}\n\nfunction BlockOptionsDropdownList({\n  editor,\n  blockType,\n  toolbarRef,\n  setShowBlockOptionsDropDown\n}) {\n  const dropDownRef = useRef(null);\n\n  useEffect(() => {\n    const toolbar = toolbarRef.current;\n    const dropDown = dropDownRef.current;\n\n    if (toolbar !== null && dropDown !== null) {\n      const { top, left } = toolbar.getBoundingClientRect();\n      dropDown.style.bottom = '117px'; //`${top + 40}px`;\n      dropDown.style.left = `${left}px`;\n    }\n  }, [dropDownRef, toolbarRef]);\n\n  useEffect(() => {\n    const dropDown = dropDownRef.current;\n    const toolbar = toolbarRef.current;\n\n    if (dropDown !== null && toolbar !== null) {\n      const handle = (event) => {\n        const target = event.target;\n\n        if (!dropDown.contains(target) && !toolbar.contains(target)) {\n          setShowBlockOptionsDropDown(false);\n        }\n      };\n      document.addEventListener(\"click\", handle);\n\n      return () => {\n        document.removeEventListener(\"click\", handle);\n      };\n    }\n  }, [dropDownRef, setShowBlockOptionsDropDown, toolbarRef]);\n\n  const formatParagraph = () => {\n    if (blockType !== \"paragraph\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createParagraphNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatLargeHeading = () => {\n    if (blockType !== \"h1\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createHeadingNode(\"h1\"));\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatSmallHeading = () => {\n    if (blockType !== \"h2\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createHeadingNode(\"h2\"));\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatBulletList = () => {\n    if (blockType !== \"ul\") {\n      editor.dispatchCommand(INSERT_UNORDERED_LIST_COMMAND);\n    } else {\n      editor.dispatchCommand(REMOVE_LIST_COMMAND);\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatNumberedList = () => {\n    if (blockType !== \"ol\") {\n      editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND);\n    } else {\n      editor.dispatchCommand(REMOVE_LIST_COMMAND);\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatQuote = () => {\n    if (blockType !== \"quote\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createQuoteNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  const formatCode = () => {\n    if (blockType !== \"code\") {\n      editor.update(() => {\n        const selection = $getSelection();\n\n        if ($isRangeSelection(selection)) {\n          $wrapLeafNodesInElements(selection, () => $createCodeNode());\n        }\n      });\n    }\n    setShowBlockOptionsDropDown(false);\n  };\n\n  return (\n    <div className=\"dropdown\" ref={dropDownRef}>\n      <button className=\"item\" onClick={formatParagraph}>\n        <span className=\"icon paragraph\" />\n        <span className=\"text\">Normal</span>\n        {blockType === \"paragraph\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatLargeHeading}>\n        <span className=\"icon large-heading\" />\n        <span className=\"text\">Large Heading</span>\n        {blockType === \"h1\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatSmallHeading}>\n        <span className=\"icon small-heading\" />\n        <span className=\"text\">Small Heading</span>\n        {blockType === \"h2\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatBulletList}>\n        <span className=\"icon bullet-list\" />\n        <span className=\"text\">Bullet List</span>\n        {blockType === \"ul\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatNumberedList}>\n        <span className=\"icon numbered-list\" />\n        <span className=\"text\">Numbered List</span>\n        {blockType === \"ol\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatQuote}>\n        <span className=\"icon quote\" />\n        <span className=\"text\">Quote</span>\n        {blockType === \"quote\" && <span className=\"active\" />}\n      </button>\n      <button className=\"item\" onClick={formatCode}>\n        <span className=\"icon code\" />\n        <span className=\"text\">Code Block</span>\n        {blockType === \"code\" && <span className=\"active\" />}\n      </button>\n    </div>\n  );\n}\n\nexport default function ToolbarPlugin() {\n  const [editor] = useLexicalComposerContext();\n  const toolbarRef = useRef(null);\n  const [canUndo, setCanUndo] = useState(false);\n  const [canRedo, setCanRedo] = useState(false);\n  const [blockType, setBlockType] = useState(\"paragraph\");\n  const [selectedElementKey, setSelectedElementKey] = useState(null);\n  const [showBlockOptionsDropDown, setShowBlockOptionsDropDown] = useState(\n    false\n  );\n  const [codeLanguage, setCodeLanguage] = useState(\"\");\n  const [isRTL, setIsRTL] = useState(false);\n  const [isLink, setIsLink] = useState(false);\n  const [isBold, setIsBold] = useState(false);\n  const [isItalic, setIsItalic] = useState(false);\n  const [isUnderline, setIsUnderline] = useState(false);\n  const [isStrikethrough, setIsStrikethrough] = useState(false);\n  const [isCode, setIsCode] = useState(false);\n\n  const updateToolbar = useCallback(() => {\n    const selection = $getSelection();\n    if ($isRangeSelection(selection)) {\n      const anchorNode = selection.anchor.getNode();\n      const element =\n        anchorNode.getKey() === \"root\"\n          ? anchorNode\n          : anchorNode.getTopLevelElementOrThrow();\n      const elementKey = element.getKey();\n      const elementDOM = editor.getElementByKey(elementKey);\n      if (elementDOM !== null) {\n        setSelectedElementKey(elementKey);\n        if ($isListNode(element)) {\n          const parentList = $getNearestNodeOfType(anchorNode, ListNode);\n          const type = parentList ? parentList.getTag() : element.getTag();\n          setBlockType(type);\n        } else {\n          const type = $isHeadingNode(element)\n            ? element.getTag()\n            : element.getType();\n          setBlockType(type);\n          if ($isCodeNode(element)) {\n            setCodeLanguage(element.getLanguage() || getDefaultCodeLanguage());\n          }\n        }\n      }\n      // Update text format\n      setIsBold(selection.hasFormat(\"bold\"));\n      setIsItalic(selection.hasFormat(\"italic\"));\n      setIsUnderline(selection.hasFormat(\"underline\"));\n      setIsStrikethrough(selection.hasFormat(\"strikethrough\"));\n      setIsCode(selection.hasFormat(\"code\"));\n      setIsRTL($isParentElementRTL(selection));\n\n      // Update links\n      const node = getSelectedNode(selection);\n      const parent = node.getParent();\n      if ($isLinkNode(parent) || $isLinkNode(node)) {\n        setIsLink(true);\n      } else {\n        setIsLink(false);\n      }\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          updateToolbar();\n        });\n      }),\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        (_payload, newEditor) => {\n          updateToolbar();\n          return false;\n        },\n        LowPriority\n      ),\n      editor.registerCommand(\n        CAN_UNDO_COMMAND,\n        (payload) => {\n          setCanUndo(payload);\n          return false;\n        },\n        LowPriority\n      ),\n      editor.registerCommand(\n        CAN_REDO_COMMAND,\n        (payload) => {\n          setCanRedo(payload);\n          return false;\n        },\n        LowPriority\n      )\n    );\n  }, [editor, updateToolbar]);\n\n  const codeLanguges = useMemo(() => getCodeLanguages(), []);\n  const onCodeLanguageSelect = useCallback(\n    (e) => {\n      editor.update(() => {\n        if (selectedElementKey !== null) {\n          const node = $getNodeByKey(selectedElementKey);\n          if ($isCodeNode(node)) {\n            node.setLanguage(e.target.value);\n          }\n        }\n      });\n    },\n    [editor, selectedElementKey]\n  );\n\n  const insertLink = useCallback(() => {\n    if (!isLink) {\n      editor.dispatchCommand(TOGGLE_LINK_COMMAND, \"https://\");\n    } else {\n      editor.dispatchCommand(TOGGLE_LINK_COMMAND, null);\n    }\n  }, [editor, isLink]);\n\n  return (\n    <div className=\"toolbar\" ref={toolbarRef}>\n      <button\n        disabled={!canUndo}\n        onClick={() => {\n          editor.dispatchCommand(UNDO_COMMAND);\n        }}\n        className=\"toolbar-item spaced\"\n        aria-label=\"Undo\"\n      >\n        <img \n          className=\"format undo\" \n          src={undoIcon}\n        />\n      </button>\n      <button\n        disabled={!canRedo}\n        onClick={() => {\n          editor.dispatchCommand(REDO_COMMAND);\n        }}\n        className=\"toolbar-item\"\n        aria-label=\"Redo\"\n      >\n        <img \n          className=\"format redo\"\n          src={redoIcon} \n        />\n      </button>\n      <Divider />\n      {supportedBlockTypes.has(blockType) && (\n        <>\n          <button\n            className=\"toolbar-item block-controls\"\n            onClick={() =>\n              setShowBlockOptionsDropDown(!showBlockOptionsDropDown)\n            }\n            aria-label=\"Formatting Options\"\n          >\n            <span \n              className={\"icon block-type \" + blockType}\n            />\n            <span className=\"text\">{blockTypeToBlockName[blockType]}</span>\n            <img \n              className=\"chevron-down\" \n              src={chevronDownIcon}\n            />\n          </button>\n          {showBlockOptionsDropDown &&\n            createPortal(\n              <BlockOptionsDropdownList\n                editor={editor}\n                blockType={blockType}\n                toolbarRef={toolbarRef}\n                setShowBlockOptionsDropDown={setShowBlockOptionsDropDown}\n              />,\n              document.body\n            )}\n          <Divider />\n        </>\n      )}\n      {blockType === \"code\" ? (\n        <>\n          <Select\n            className=\"toolbar-item code-language\"\n            onChange={onCodeLanguageSelect}\n            options={codeLanguges}\n            value={codeLanguage}\n          />\n          <img \n            src={chevronDownIcon}\n            className=\"chevron-down inside\" \n          />\n        </>\n      ) : (\n        <>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\");\n            }}\n            className={\"toolbar-item spaced \" + (isBold ? \"active\" : \"\")}\n            aria-label=\"Format Bold\"\n          >\n            <img \n              className=\"format bold\" \n              src={boldIcon}\n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"italic\");\n            }}\n            className={\"toolbar-item spaced \" + (isItalic ? \"active\" : \"\")}\n            aria-label=\"Format Italics\"\n          >\n            <img \n              className=\"format italic\"\n              src={italicIcon}\n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"underline\");\n            }}\n            className={\"toolbar-item spaced \" + (isUnderline ? \"active\" : \"\")}\n            aria-label=\"Format Underline\"\n          >\n            <img \n              className=\"format underline\"\n              src={underlineIcon}\n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"strikethrough\");\n            }}\n            className={\n              \"toolbar-item spaced \" + (isStrikethrough ? \"active\" : \"\")\n            }\n            aria-label=\"Format Strikethrough\"\n          >\n            <img \n              className=\"format strikethrough\"\n              src={strikeThroughIcon} \n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"code\");\n            }}\n            className={\"toolbar-item spaced \" + (isCode ? \"active\" : \"\")}\n            aria-label=\"Insert Code\"\n          >\n            <img \n              className=\"format code\" \n              src={codeIcon}\n            />\n          </button>\n          <button\n            onClick={insertLink}\n            className={\"toolbar-item spaced \" + (isLink ? \"active\" : \"\")}\n            aria-label=\"Insert Link\"\n          >\n            <img \n              className=\"format link\"\n              src={linkIcon} \n            />\n          </button>\n          {isLink &&\n            createPortal(<FloatingLinkEditor editor={editor} />, document.body)}\n          <Divider />\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"left\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Left Align\"\n          >\n            <img \n              className=\"format left-align\" \n              src={leftAlignIcon}\n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"center\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Center Align\"\n          >\n            <img \n              className=\"format center-align\" \n              src={centerAlignIcon}\n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"right\");\n            }}\n            className=\"toolbar-item spaced\"\n            aria-label=\"Right Align\"\n          >\n            <img \n              className=\"format right-align\"\n              src={rightAlignIcon} \n            />\n          </button>\n          <button\n            onClick={() => {\n              editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, \"justify\");\n            }}\n            className=\"toolbar-item\"\n            aria-label=\"Justify Align\"\n          >\n            <img \n              className=\"format justify-align\" \n              src={justifyAlignIcon}\n            />\n          </button>{\" \"}\n        </>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { HistoryPlugin } from \"@lexical/react/LexicalHistoryPlugin\";\nimport { AutoFocusPlugin } from \"@lexical/react/LexicalAutoFocusPlugin\";\nimport ToolbarPlugin from \"./ToolbarPlugin\";\nimport { HeadingNode, QuoteNode } from \"@lexical/rich-text\";\nimport { TableCellNode, TableNode, TableRowNode } from \"@lexical/table\";\nimport { ListItemNode, ListNode } from \"@lexical/list\";\nimport { CodeHighlightNode, CodeNode } from \"@lexical/code\";\nimport { AutoLinkNode, LinkNode } from \"@lexical/link\";\nimport { LinkPlugin } from \"@lexical/react/LexicalLinkPlugin\";\nimport { ListPlugin } from \"@lexical/react/LexicalListPlugin\";\nimport { MarkdownShortcutPlugin } from \"@lexical/react/LexicalMarkdownShortcutPlugin\";\nimport {OnChangePlugin} from '@lexical/react/LexicalOnChangePlugin';\nimport { TRANSFORMERS } from \"@lexical/markdown\";\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport \"./editor.css\";\nexport default function Editor({initialEditorState, onEditorStateChange, cutomEditorState}) {\n  const editorConfig = {\n    // The editor theme\n    theme: ExampleTheme,\n    // Handling of errors during update\n    onError(error) {\n      throw error;\n    },\n    editorState: initialEditorState,\n    // Any custom nodes go here\n    nodes: [\n      HeadingNode,\n      ListNode,\n      ListItemNode,\n      QuoteNode,\n      CodeNode,\n      CodeHighlightNode,\n      TableNode,\n      TableCellNode,\n      TableRowNode,\n      AutoLinkNode,\n      LinkNode\n    ]\n  };\n  \n  return (\n    <LexicalComposer initialConfig={editorConfig}>\n      <div className=\"editor-container\">\n        <div className=\"editor-inner\">\n          <RichTextPlugin\n            contentEditable={<ContentEditable className=\"editor-input\" />}\n            placeholder={<Placeholder />}\n          />\n          <HistoryPlugin />\n          <OnChangePlugin \n            ignoreSelectionChange={true}\n            ignoreI\n            onChange={editorState => onEditorStateChange ? onEditorStateChange(editorState) : 0} \n          />\n          <AutoFocusPlugin />\n          <ListPlugin />\n          <LinkPlugin />\n          <MarkdownShortcutPlugin transformers={TRANSFORMERS} />\n          <CustomContentPlugin customEditorState={cutomEditorState} />\n        </div>\n        <ToolbarPlugin />\n      </div>\n    </LexicalComposer>\n  );\n}\n\n// Lexical React plugins are React components, which makes them\n// highly composable. Furthermore, you can lazy load plugins if\n// desired, so you don't pay the cost for plugins until you\n// actually use them.\nfunction CustomContentPlugin({customEditorState}) {\n  const [editor] = useLexicalComposerContext();\n\n  React.useEffect(() => {\n    \n    const editorState = editor.parseEditorState(customEditorState);\n    editor.setEditorState(editorState);\n    // Focus the editor when the effect fires!\n    editor.focus();\n  }, [editor, customEditorState]);\n\n  return null;\n}\n\nconst ExampleTheme = {\n  ltr: \"ltr\",\n  rtl: \"rtl\",\n  placeholder: \"editor-placeholder\",\n  paragraph: \"editor-paragraph\",\n  quote: \"editor-quote\",\n  heading: {\n    h1: \"editor-heading-h1\",\n    h2: \"editor-heading-h2\",\n    h3: \"editor-heading-h3\",\n    h4: \"editor-heading-h4\",\n    h5: \"editor-heading-h5\"\n  },\n  list: {\n    nested: {\n      listitem: \"editor-nested-listitem\"\n    },\n    ol: \"editor-list-ol\",\n    ul: \"editor-list-ul\",\n    listitem: \"editor-listitem\"\n  },\n  image: \"editor-image\",\n  link: \"editor-link\",\n  text: {\n    bold: \"editor-text-bold\",\n    italic: \"editor-text-italic\",\n    overflowed: \"editor-text-overflowed\",\n    hashtag: \"editor-text-hashtag\",\n    underline: \"editor-text-underline\",\n    strikethrough: \"editor-text-strikethrough\",\n    underlineStrikethrough: \"editor-text-underlineStrikethrough\",\n    code: \"editor-text-code\"\n  },\n  code: \"editor-code\",\n  codeHighlight: {\n    atrule: \"editor-tokenAttr\",\n    attr: \"editor-tokenAttr\",\n    boolean: \"editor-tokenProperty\",\n    builtin: \"editor-tokenSelector\",\n    cdata: \"editor-tokenComment\",\n    char: \"editor-tokenSelector\",\n    class: \"editor-tokenFunction\",\n    \"class-name\": \"editor-tokenFunction\",\n    comment: \"editor-tokenComment\",\n    constant: \"editor-tokenProperty\",\n    deleted: \"editor-tokenProperty\",\n    doctype: \"editor-tokenComment\",\n    entity: \"editor-tokenOperator\",\n    function: \"editor-tokenFunction\",\n    important: \"editor-tokenVariable\",\n    inserted: \"editor-tokenSelector\",\n    keyword: \"editor-tokenAttr\",\n    namespace: \"editor-tokenVariable\",\n    number: \"editor-tokenProperty\",\n    operator: \"editor-tokenOperator\",\n    prolog: \"editor-tokenComment\",\n    property: \"editor-tokenProperty\",\n    punctuation: \"editor-tokenPunctuation\",\n    regex: \"editor-tokenVariable\",\n    selector: \"editor-tokenSelector\",\n    string: \"editor-tokenSelector\",\n    symbol: \"editor-tokenProperty\",\n    tag: \"editor-tokenProperty\",\n    url: \"editor-tokenOperator\",\n    variable: \"editor-tokenVariable\"\n  }\n};\n\nfunction Placeholder() {\n  return <div className=\"editor-placeholder\">Enter some rich text...</div>;\n}\n\n\n","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport Editor from './Editor';\nimport {useParams} from 'react-router-dom';\nimport _debounce from 'lodash/debounce';\n\nimport {setDoc, doc, getDoc} from 'firebase/firestore';\n\nexport default function ItemView({firestore}) {\n  const {itemId} = useParams();\n  var [item, setItem] = React.useState({})\n  //Controls the input to Lexical\n  var emptyEditorState = `{\"root\":{\"children\":[{\"children\":[],\"direction\":null,\"format\":\"\",\"indent\":0,\"type\":\"paragraph\",\"version\":1}],\"direction\":null,\"format\":\"\",\"indent\":0,\"type\":\"root\",\"version\":1}}`\n  //var headingAndNumbersState = `{\"root\":{\"children\":[{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"This is React vs View\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"heading\",\"version\":1,\"tag\":\"h1\"},{\"children\":[{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"React is more popular.\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"listitem\",\"version\":1,\"value\":1},{\"children\":[{\"detail\":0,\"format\":0,\"mode\":\"normal\",\"style\":\"\",\"text\":\"React is based on better programming principles!\",\"type\":\"text\",\"version\":1}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"listitem\",\"version\":1,\"value\":2}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"list\",\"version\":1,\"listType\":\"number\",\"start\":1,\"tag\":\"ol\"}],\"direction\":\"ltr\",\"format\":\"\",\"indent\":0,\"type\":\"root\",\"version\":1}}`\n  var [customEditorState, setCustomEditorState] = React.useState(\n    emptyEditorState\n  );\n  \n  // Debounce changes from editor to save to Firestore\n  var saveEditorStateDebounced = React.useCallback(_debounce( (content, item) => {\n    console.log('Save Called!')\n    setDoc(doc(firestore, \"lists\", item.id), {\n      content: content\n    }, {\n      merge: true\n    });\n  }, 2000), [])\n  //TODO React is calling this function many times and hence\n  // checking, if item.id is already there then there \n  // then ItemState is already populated from DB.\n  React.useEffect(() => {\n    \n    // Load content from firebase and set it as editor state\n    if (!item.id){\n      getDoc(doc(firestore, \"lists\", itemId))\n      .then(docSnap =>{\n        if (docSnap.exists()) {\n          setItem({\n            ...docSnap.data(),\n            id: itemId\n          });\n          if (docSnap.data().content){\n            setCustomEditorState(docSnap.data().content)\n          }\n        } else {\n          // doc.data() will be undefined in this case\n        }\n      })\n      .catch(e=> console.log('error', e))\n    }\n    \n  }, [])\n\n  return(\n\n    <div style={styles.container}>\n      <AppHeader label={item.label} firestore={firestore} />\n      <Editor\n        initialEditorState ={\n          customEditorState\n        }\n        cutomEditorState = {\n          customEditorState\n        }\n        onEditorStateChange = {\n          editorState => {\n            setItem({\n              ...item,\n              content: JSON.stringify(editorState)\n            })\n            saveEditorStateDebounced(JSON.stringify(editorState), item);\n          }\n        }\n      />\n      <SearchBar />\n    </div>\n  )\n}\n\nvar styles = {\n  container: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n\n}","import \"../styles.css\";\nimport React from 'react';\nimport theme from '../ThemeContext'\nimport AppHeader from \"../AppHeader\";\nimport SearchBar from '../SearchBar';\nimport {Link} from 'react-router-dom';\nimport {addDoc, setDoc, deleteDoc, doc, getDoc, onSnapshot, query, collection} from 'firebase/firestore';\n\n\nexport default function ProjectsView({firestore}) {\n  \n  // Sate syncronised with the DB\n  var [projects, setProjects] = React.useState([]);\n\n  let [newProjectTextboxValue, setNewProjectTextboxValue] = React.useState('');\n\n  React.useEffect(()=> {    \n    onSnapshot(\n      query(collection(firestore, 'projects')),\n      (snapshot) => {\n        setProjects(snapshot.docs.map(d=> {\n          return {\n            ...d.data(),\n            id: d.id\n          }\n        }))\n      }\n    )\n  }, [firestore]);\n  function onNewProjectAddition (projectLabel){\n    \n    addDoc(collection(firestore, \"projects\"), {\n      label: projectLabel\n    })\n    .then(c => console.log('success', c))\n    .catch(c => console.log('error', c))\n  }\n\n  function onProjectDeletion (projectId) {\n    deleteDoc(doc(firestore, \"projects\", projectId));\n  }\n  function onProjectRename (newLabel, projectId) {\n    setDoc(doc(firestore, \"projects\", projectId), {\n      label: newLabel,\n    }, {\n      merge: true\n    });\n  }\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }}>\n      <AppHeader label=\"Projects\" firestore={firestore} />\n      <section name=\"projectsListSection\" style={theme.card} >\n        <ul name = \"projectsList\" style={theme.ul}> {\n          projects.map((project, i)=> {\n            return(\n              <li \n                key={project.id}\n                style={{\n                  ...theme.li,\n                  backgroundColor: 'white'\n                }}\n              >\n                <span style= {styles.serialNumberIcon}>\n                  {i + 1}\n                </span>\n                <input \n                  name=\"projectLabelTextbox\"\n                  type=\"text\"\n                  onChange={evt => {\n                    var renamedProjects = projects.slice();\n                    renamedProjects[i].label = evt.target.value;\n                    setProjects(renamedProjects);\n                  }}\n                  onKeyPress = {evt => {                     \n                    if (evt.key == 'Enter'){\n                      onProjectRename(evt.target.value, project.id)\n                    }}\n                  }\n                  // Doesn't work as of now\n                  onBlur = {evt => {\n                    if (evt.target.value != project.label){\n                      onProjectRename(evt.target.value, project.id)\n                    }\n                  }}\n                  value={project.label}\n                  style={styles.input} \n                />\n                <span \n                  style= {styles.deleteIcon}\n                  onClick={evt => onProjectDeletion(project.id)}\n                >\n                  -\n                </span>\n                <Link \n                  style= {styles.nextIcon}\n                  to={`/project/${project.id}`}\n                >\n                  >\n                </Link>\n              </li>\n            )\n          })\n        }\n        </ul>\n      </section>\n\n      <section name=\"newProject\" style= {theme.card}>  \n        <input\n          name=\"newProjectTextBox\"\n          type=\"text\" \n          placeholder=\"Add a Project\"\n          autoFocus\n          value={newProjectTextboxValue}\n          onKeyPress={evt => {\n            if (evt.key === 'Enter'){\n              onNewProjectAddition(evt.target.value);\n              setNewProjectTextboxValue('')\n            }\n          }}\n          onChange= {evt => {\n            setNewProjectTextboxValue(evt.target.value)\n          }}\n          style={styles.input} />\n      </section>\n      \n      <SearchBar />\n    </div>\n  );\n}\n\nvar styles = {\n  input: {\n    border: 'none',\n    marginLeft: '5px',\n    outline: 'none',\n    fontSize: '16pt'\n  },\n  deleteIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: '#ee4422',\n    width: '20px',\n    textAlign: 'center'\n  },\n  nextIcon: {\n    marginLeft: 'auto',\n    marginRight:'20px',\n    textAlign: 'centre',\n    fontWeight: 900,\n    fontSize: '16pt',\n    backgroundColor: 'lightblue',\n    width: '20px',\n    textAlign: 'center'\n  },\n  serialNumberIcon: {\n    width: '20px',\n    height: '20px',\n    alignSelf: 'center'\n  }\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport React from 'react';\n\nimport {createTheme, ThemeProvider} from '@mui/material'\n\nimport ProjectView from \"./ProjectView/ProjectView\";\nimport HomeView from './HomeView/HomeView';\nimport SearchView from \"./SearchView/SearchView\";\nimport ItemView from \"./ItemView/ItemView\";\nimport ProjectsView from \"./ProjectsView/ProjectsView\";\nimport {firestore} from './firebase';\nimport {enableNetwork, disableNetwork} from 'firebase/firestore'\nimport fuseInstance from './data/search';\nimport {\n  createBrowserRouter,\n  RouterProvider,\n} from \"react-router-dom\";\n\n// Change isSyncing State (that changes animation)\n// Set Firestore to Online and check for data from the server\nfunction syncFirestore () {\n  console.log('Syncing');  \n  enableNetwork(firestore);\n  setTimeout(() => {\n    disableNetwork(firestore)\n  }, 5000)\n}\n\nsyncFirestore();\nsetInterval(syncFirestore, 10000)\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FFCA28'\n    }\n  },\n  shape: {\n    borderRadius: 6\n  },\n  typography: {\n    fontFamily: [\n      'Proxima Nova Condensed',\n      'Roboto Condensed',\n      'sans-serif'\n    ].join(','),\n    fontSize: 12\n  }\n})\ntheme.spacing(1);\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nconst router = createBrowserRouter([\n  {\n    path: \"/\",\n    element: <HomeView firestore={firestore} />,\n    errorElement: <HomeView firestore={firestore} />\n  }, \n  {\n    path: '/projects',\n    element: <ProjectsView firestore={firestore} />\n  },\n  {\n    path: '/search',\n    element: <SearchView firestore={firestore} fuseInstance={fuseInstance} />\n  }, {\n    path: '/project/:projectId',\n    element: <ProjectView firestore={firestore} />\n  }, {\n    path: '/item/:itemId',\n    element: <ItemView firestore={firestore} />\n  }\n\n]);\nroot.render(\n  \n  <StrictMode>\n    <ThemeProvider theme={theme}>\n    {/* <ThemeContext.Provider value=\"dark\"> */}\n      <RouterProvider router={router} />\n      {/* <ProjectView /> */}\n      {/* <HomeView firestore={firestore} /> */}\n      {/* <SearchView /> */}\n    {/* </ThemeContext.Provider> */}\n    </ThemeProvider>\n  </StrictMode>\n);\n"],"sourceRoot":""}